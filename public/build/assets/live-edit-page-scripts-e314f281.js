mw.require("options.js");mw.require("liveedit.css");mw.liveEditSaveService={grammarlyFix:function(e){return mw.$("grammarly-btn",e).remove(),mw.$("grammarly-card",e).remove(),mw.$("g.gr_",e).each(function(){mw.$(this).replaceWith(this.innerHTML)}),mw.$("[data-gramm_id]",e).removeAttr("data-gramm_id"),mw.$("[data-gramm]",e).removeAttr("data-gramm"),mw.$("[data-gramm_id]",e).removeAttr("data-gramm_id"),mw.$("grammarly-card",e).remove(),mw.$("grammarly-inline-cards",e).remove(),mw.$("grammarly-popups",e).remove(),mw.$("grammarly-extension",e).remove(),e},saving:!1,coreSave:function(e){if(!e)return!1;$.each(e,function(){var r=mw.tools.parseHtml(this.html).body;mw.liveEditSaveService.grammarlyFix(r),mw.liveEditSaveService.animationsClearFix(r),this.html=r.innerHTML}),mw.liveEditSaveService.saving=!0,e=JSON.stringify(e),e=btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(a,i){return String.fromCharCode("0x"+i)})),e={data_base64:e};var t=mw.ajax({type:"POST",url:mw.settings.api_url+"save_edit",data:e,dataType:"json",success:function(r){r&&r.new_page_url&&!mw.liveEditSaveService.DraftSaving&&(window.mw.parent().askusertostay=!1,window.mw.askusertostay=!1,window.location.href=r.new_page_url)}});return t.always(function(){mw.liveEditSaveService.saving=!1}),t},parseContent:function(e){e=e||document.body;var t=mw.tools.parseHtml(e.innerHTML);mw.$(".element-current",t).removeClass("element-current"),mw.$(".element-active",t).removeClass("element-active"),mw.$(".disable-resize",t).removeClass("disable-resize"),mw.$(".mw-module-drag-clone",t).removeClass("mw-module-drag-clone"),mw.$(".ui-draggable",t).removeClass("ui-draggable"),mw.$(".ui-draggable-handle",t).removeClass("ui-draggable-handle"),mw.$(".mt-ready",t).removeClass("mt-ready"),mw.$(".mw-webkit-drag-hover-binded",t).removeClass("mw-webkit-drag-hover-binded"),mw.$(".module-cat-toggle-Modules",t).removeClass("module-cat-toggle-Modules"),mw.$(".mw-module-drag-clone",t).removeClass("mw-module-drag-clone"),mw.$("-module",t).removeClass("-module"),mw.$(".empty-element",t).remove(),mw.$(".empty-element",t).remove(),mw.$(".edit .ui-resizable-handle",t).remove(),mw.$("script",t).remove(),mw.tools.classNamespaceDelete("all","ui-",t,"starts"),mw.$("[contenteditable]",t).removeAttr("contenteditable");for(var r=t.querySelectorAll("[contenteditable]"),a=r.length,i=0;i<a;i++)r[i].removeAttribute("contenteditable");for(var r=t.querySelectorAll(".module"),a=r.length,i=0;i<a;i++)r[i].querySelector(".edit")===null&&(r[i].innerHTML="");return t},htmlAttrValidate:function(e){var t=[];return $.each(e,function(){var r=this.outerHTML;r=r.replace(/url\(&quot;/g,"url('"),r=r.replace(/jpg&quot;/g,"jpg'"),r=r.replace(/jpeg&quot;/g,"jpeg'"),r=r.replace(/png&quot;/g,"png'"),r=r.replace(/gif&quot;/g,"gif'"),t.push($(r)[0])}),t},cleanUnwantedTags:function(e){return mw.$(".mw-skip-and-remove,script",e).remove(),e},animationsClearFix:function(e){return mw.$('[class*="animate__"]').each(function(){mw.tools.classNamespaceDelete(this,"animate__")}),e},collectData:function(e){mw.$(e).each(function(){mw.$("meta",this).remove(),$(".mw-le-spacer",this).empty().removeAttr("data-resizable").removeAttr("style")}),e=this.htmlAttrValidate(e);var t=e.length,r=0,a={},i={};if(t>0)for(;r<t;r++){a.item=e[r];var n=mw.tools.mwattr(a.item,"rel");n||(mw.$(a.item).removeClass("changed"),mw.tools.foreachParents(a.item,function(c){var w=this.className,f=mw.tools.mwattr(this,"rel");mw.tools.hasClass(w,"edit")&&mw.tools.hasClass(w,"changed")&&f&&(a.item=this,mw.tools.stopLoop(c))}));var n=mw.tools.mwattr(a.item,"rel");if(!n){var d=a.item.id?"#"+a.item.id:"";console.warn("Skipped save: .edit"+d+" element does not have rel attribute.");continue}mw.$(a.item).removeClass("changed orig_changed"),mw.$(a.item).removeClass("module-over"),mw.$(".module-over",a.item).each(function(){mw.$(this).removeClass("module-over")}),mw.$("[class]",a.item).each(function(){var c=this.getAttribute("class");typeof c=="string"&&(c=c.trim()),c||this.removeAttribute("class")});var s=mw.liveEditSaveService.cleanUnwantedTags(a.item).innerHTML,o={},m=a.item.attributes;if(m.length>0)for(var l=0,v=m.length;l<v;l++)o[m[l].nodeName]=m[l].nodeValue;var u={attributes:o,html:s},g="field_data_"+r;i[g]=u}return i},getData:function(e){var t=mw.liveEditSaveService.parseContent(e).body,r=t.querySelectorAll(".edit.changed");return mw.liveEditSaveService.collectData(r)},saveDisabled:!1,draftDisabled:!1,save:function(e,t,r){if(mw.trigger("beforeSaveStart",e),mw.liveedit&&mw.liveedit.cssEditor&&mw.liveedit.cssEditor.publishIfChanged(),mw.liveEditSaveService.saveDisabled)return!1;if(!e){var a=mw.liveEditSaveService.parseContent().body,i=a.querySelectorAll(".edit.changed");e=mw.liveEditSaveService.collectData(i)}var n=(mw.__pageAnimations||[]).filter(function(o){return o.animation!=="none"});if(n&&n.length>0){var d={group:"template",key:"animations-global",value:JSON.stringify(n)};mw.options.saveOption(d)}if(mw.tools.isEmptyObject(e))return t&&t.call({}),!1;mw._liveeditData=e,mw.trigger("saveStart",mw._liveeditData);var s=mw.liveEditSaveService.coreSave(mw._liveeditData);return s.error(function(o){s.status==403&&(mw.dialog({id:"save_content_error_iframe_modal",html:"<iframe id='save_content_error_iframe' style='overflow-x:hidden;overflow-y:auto;' class='mw-modal-frame' ></iframe>",width:$(window).width()-90,height:$(window).height()-90}),mw.askusertostay=!1,mw.$("#save_content_error_iframe").ready(function(){var m=document.getElementById("save_content_error_iframe").contentWindow.document;m.open(),m.write(s.responseText),m.close();var l=0;m=document.getElementById("save_content_error_iframe").contentWindow.document,mw.$("#save_content_error_iframe").load(function(){var v=mw.$(".challenge-form",m).length;l++,v&&l==2&&setTimeout(function(){mw.askusertostay=!1,mw.$("#save_content_error_iframe_modal").remove()},150)})})),r&&r.call(o)}),s.success(function(o){mw.$(".edit.changed").removeClass("changed"),mw.$(".orig_changed").removeClass("orig_changed"),document.querySelector(".edit.changed")!==null?mw.liveEditSaveService.save():(mw.askusertostay=!1,mw.trigger("saveEnd",o)),t&&t.call(o)}),s.fail(function(o,m,l){mw.trigger("saveFailed",m,l),r&&r.call(sdata)}),s}};addEventListener("load",()=>{const e=async()=>new Promise(t=>{mw.liveEditSaveService.save(void 0,()=>t(!0),()=>t(!1))});mw.top().app.save=async()=>await e(),window.addEventListener("keydown",function(t){mw.top().app.canvas.dispatch("iframeKeyDown",{event:t})})});self.onbeforeunload=function(e){mw.top().app.canvas.dispatch("liveEditCanvasBeforeUnload");var t=mw.top().app.canvas.getWindow();if(t&&t.mw&&t.mw.askusertostay)return!0;mw.top().spinner({element:mw.top().app.canvas.getFrame().parentElement,decorate:!0,size:52}).show()};mw.drag=mw.drag||{};mw.drag.save=function(){return mw.liveEditSaveService.save()};mw.drag.fix_placeholders=function(e,t){t=t||".edit .row";var r="div.col-md",a=mw.top().app.templateSettings.helperClasses.external_grids_col_classes,i;for(i=a.length-1;i>=0;--i)r+=",div."+a[i];mw.$(t).each(function(){var n=mw.$(this);n.children(r).each(function(){var d=mw.$(this).children("*");if(d.size()==0){mw.$(this).append('<div class="element" id="mw-element-'+mw.random()+'"></div>');var d=mw.$(this).children("div.element")}})})};mw.drag.module_settings=function(){var e=mw.top().app.liveEdit.moduleHandle.getTarget();return mw.top().app.editor.dispatch("onModuleSettingsRequest",e)};mw.top().app.canvas.on("canvasDocumentDoubleClick",function(e){if(e&&e.target){var t=mw.tools.hasParentsWithClass(e.target,"module");if(t){var r=mw.tools.firstParentOrCurrentWithAnyOfClasses(e.target,["module"]),a=mw.tools.hasAnyOfClassesOnNodeOrParent(e.target,["safe-element","nodrop","allow-drop","module-layout"]);!a&&r&&mw.top().app.editor.dispatch("onModuleSettingsRequest",r)}}});document.addEventListener("keydown",function(e){if(e.ctrlKey&&e.key==="s")return mw.top().app.editor.dispatch("Ctrl+S",e)});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl2ZS1lZGl0LXBhZ2Utc2NyaXB0cy1lMzE0ZjI4MS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL01pY3Jvd2ViZXJQYWNrYWdlcy9MaXZlRWRpdC9yZXNvdXJjZXMvanMvdWkvbGl2ZS1lZGl0LXBhZ2Utc2NyaXB0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcblxyXG5tdy5yZXF1aXJlKCdvcHRpb25zLmpzJylcclxubXcucmVxdWlyZSgnbGl2ZWVkaXQuY3NzJylcclxuXHJcblxyXG5tdy5saXZlRWRpdFNhdmVTZXJ2aWNlID0ge1xyXG4gICAgIGdyYW1tYXJseUZpeDpmdW5jdGlvbihkYXRhKXtcclxuXHJcbiAgICAgICAgbXcuJChcImdyYW1tYXJseS1idG5cIiwgZGF0YSkucmVtb3ZlKCk7XHJcbiAgICAgICAgbXcuJChcImdyYW1tYXJseS1jYXJkXCIsIGRhdGEpLnJlbW92ZSgpO1xyXG4gICAgICAgIG13LiQoXCJnLmdyX1wiLCBkYXRhKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIG13LiQodGhpcykucmVwbGFjZVdpdGgodGhpcy5pbm5lckhUTUwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG13LiQoXCJbZGF0YS1ncmFtbV9pZF1cIiwgZGF0YSkucmVtb3ZlQXR0cignZGF0YS1ncmFtbV9pZCcpO1xyXG4gICAgICAgIG13LiQoXCJbZGF0YS1ncmFtbV1cIiwgZGF0YSkucmVtb3ZlQXR0cignZGF0YS1ncmFtbScpO1xyXG4gICAgICAgIG13LiQoXCJbZGF0YS1ncmFtbV9pZF1cIiwgZGF0YSkucmVtb3ZlQXR0cignZGF0YS1ncmFtbV9pZCcpO1xyXG4gICAgICAgIG13LiQoXCJncmFtbWFybHktY2FyZFwiLCBkYXRhKS5yZW1vdmUoKTtcclxuICAgICAgICBtdy4kKFwiZ3JhbW1hcmx5LWlubGluZS1jYXJkc1wiLCBkYXRhKS5yZW1vdmUoKTtcclxuICAgICAgICBtdy4kKFwiZ3JhbW1hcmx5LXBvcHVwc1wiLCBkYXRhKS5yZW1vdmUoKTtcclxuICAgICAgICBtdy4kKFwiZ3JhbW1hcmx5LWV4dGVuc2lvblwiLCBkYXRhKS5yZW1vdmUoKTtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH0sXHJcbiAgICBzYXZpbmc6IGZhbHNlLFxyXG4gICAgY29yZVNhdmU6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZiAoIWRhdGEpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIGJvZHkgPSBtdy50b29scy5wYXJzZUh0bWwodGhpcy5odG1sKS5ib2R5O1xyXG4gICAgICAgICAgICBtdy5saXZlRWRpdFNhdmVTZXJ2aWNlLmdyYW1tYXJseUZpeChib2R5KTtcclxuICAgICAgICAgICAgbXcubGl2ZUVkaXRTYXZlU2VydmljZS5hbmltYXRpb25zQ2xlYXJGaXgoYm9keSk7XHJcbiAgICAgICAgICAgIHRoaXMuaHRtbCA9IGJvZHkuaW5uZXJIVE1MO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG13LmxpdmVFZGl0U2F2ZVNlcnZpY2Uuc2F2aW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKiAgU1RBUlQgYmFzZTY0ICAqKioqKioqKioqKiovXHJcbiAgICAgICAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG4gICAgICAgIGRhdGEgPSBidG9hKGVuY29kZVVSSUNvbXBvbmVudChkYXRhKS5yZXBsYWNlKC8lKFswLTlBLUZdezJ9KS9nLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiB0b1NvbGlkQnl0ZXMobWF0Y2gsIHAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSgnMHgnICsgcDEpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgZGF0YSA9IHtkYXRhX2Jhc2U2NDpkYXRhfTtcclxuICAgICAgICAvKioqKioqKioqKioqICBFTkQgYmFzZTY0ICAqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIHZhciB4aHIgPSBtdy5hamF4KHtcclxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICB1cmw6IG13LnNldHRpbmdzLmFwaV91cmwgKyAnc2F2ZV9lZGl0JyxcclxuICAgICAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoc2F2ZWRfZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYoc2F2ZWRfZGF0YSAmJiBzYXZlZF9kYXRhLm5ld19wYWdlX3VybCAmJiAhbXcubGl2ZUVkaXRTYXZlU2VydmljZS5EcmFmdFNhdmluZyl7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm13LnBhcmVudCgpLmFza3VzZXJ0b3N0YXkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubXcuYXNrdXNlcnRvc3RheSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmICA9IHNhdmVkX2RhdGEubmV3X3BhZ2VfdXJsO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB4aHIuYWx3YXlzKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBtdy5saXZlRWRpdFNhdmVTZXJ2aWNlLnNhdmluZyA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB4aHI7XHJcbiAgICB9LFxyXG4gICAgcGFyc2VDb250ZW50OiBmdW5jdGlvbihyb290KSB7XHJcbiAgICAgICAgcm9vdCA9IHJvb3QgfHwgZG9jdW1lbnQuYm9keTtcclxuICAgICAgICB2YXIgZG9jID0gbXcudG9vbHMucGFyc2VIdG1sKHJvb3QuaW5uZXJIVE1MKTtcclxuICAgICAgICBtdy4kKCcuZWxlbWVudC1jdXJyZW50JywgZG9jKS5yZW1vdmVDbGFzcygnZWxlbWVudC1jdXJyZW50Jyk7XHJcbiAgICAgICAgbXcuJCgnLmVsZW1lbnQtYWN0aXZlJywgZG9jKS5yZW1vdmVDbGFzcygnZWxlbWVudC1hY3RpdmUnKTtcclxuICAgICAgICBtdy4kKCcuZGlzYWJsZS1yZXNpemUnLCBkb2MpLnJlbW92ZUNsYXNzKCdkaXNhYmxlLXJlc2l6ZScpO1xyXG4gICAgICAgIG13LiQoJy5tdy1tb2R1bGUtZHJhZy1jbG9uZScsIGRvYykucmVtb3ZlQ2xhc3MoJ213LW1vZHVsZS1kcmFnLWNsb25lJyk7XHJcbiAgICAgICAgbXcuJCgnLnVpLWRyYWdnYWJsZScsIGRvYykucmVtb3ZlQ2xhc3MoJ3VpLWRyYWdnYWJsZScpO1xyXG4gICAgICAgIG13LiQoJy51aS1kcmFnZ2FibGUtaGFuZGxlJywgZG9jKS5yZW1vdmVDbGFzcygndWktZHJhZ2dhYmxlLWhhbmRsZScpO1xyXG4gICAgICAgIG13LiQoJy5tdC1yZWFkeScsIGRvYykucmVtb3ZlQ2xhc3MoJ210LXJlYWR5Jyk7XHJcbiAgICAgICAgbXcuJCgnLm13LXdlYmtpdC1kcmFnLWhvdmVyLWJpbmRlZCcsIGRvYykucmVtb3ZlQ2xhc3MoJ213LXdlYmtpdC1kcmFnLWhvdmVyLWJpbmRlZCcpO1xyXG4gICAgICAgIG13LiQoJy5tb2R1bGUtY2F0LXRvZ2dsZS1Nb2R1bGVzJywgZG9jKS5yZW1vdmVDbGFzcygnbW9kdWxlLWNhdC10b2dnbGUtTW9kdWxlcycpO1xyXG4gICAgICAgIG13LiQoJy5tdy1tb2R1bGUtZHJhZy1jbG9uZScsIGRvYykucmVtb3ZlQ2xhc3MoJ213LW1vZHVsZS1kcmFnLWNsb25lJyk7XHJcbiAgICAgICAgbXcuJCgnLW1vZHVsZScsIGRvYykucmVtb3ZlQ2xhc3MoJy1tb2R1bGUnKTtcclxuICAgICAgICBtdy4kKCcuZW1wdHktZWxlbWVudCcsIGRvYykucmVtb3ZlKCk7XHJcbiAgICAgICAgbXcuJCgnLmVtcHR5LWVsZW1lbnQnLCBkb2MpLnJlbW92ZSgpO1xyXG4gICAgICAgIG13LiQoJy5lZGl0IC51aS1yZXNpemFibGUtaGFuZGxlJywgZG9jKS5yZW1vdmUoKTtcclxuICAgICAgICBtdy4kKCdzY3JpcHQnLCBkb2MpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAvL3ZhciBkb2MgPSBtdy4kKGRvYykuZmluZCgnc2NyaXB0JykucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgIG13LnRvb2xzLmNsYXNzTmFtZXNwYWNlRGVsZXRlKCdhbGwnLCAndWktJywgZG9jLCAnc3RhcnRzJyk7XHJcbiAgICAgICAgbXcuJChcIltjb250ZW50ZWRpdGFibGVdXCIsIGRvYykucmVtb3ZlQXR0cihcImNvbnRlbnRlZGl0YWJsZVwiKTtcclxuICAgICAgICB2YXIgYWxsID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjb250ZW50ZWRpdGFibGVdJyksXHJcbiAgICAgICAgICAgIGwgPSBhbGwubGVuZ3RoLFxyXG4gICAgICAgICAgICBpID0gMDtcclxuICAgICAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICBhbGxbaV0ucmVtb3ZlQXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGFsbCA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcubW9kdWxlJyksXHJcbiAgICAgICAgICAgIGwgPSBhbGwubGVuZ3RoLFxyXG4gICAgICAgICAgICBpID0gMDtcclxuICAgICAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoYWxsW2ldLnF1ZXJ5U2VsZWN0b3IoJy5lZGl0JykgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGFsbFtpXS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZG9jO1xyXG4gICAgfSxcclxuICAgIGh0bWxBdHRyVmFsaWRhdGU6ZnVuY3Rpb24oZWRpdHMpe1xyXG4gICAgICAgIHZhciBmaW5hbCA9IFtdO1xyXG4gICAgICAgICQuZWFjaChlZGl0cywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIGh0bWwgPSB0aGlzLm91dGVySFRNTDtcclxuICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvdXJsXFwoJnF1b3Q7L2csIFwidXJsKCdcIik7XHJcbiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoL2pwZyZxdW90Oy9nLCBcImpwZydcIik7XHJcbiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoL2pwZWcmcXVvdDsvZywgXCJqcGVnJ1wiKTtcclxuICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvcG5nJnF1b3Q7L2csIFwicG5nJ1wiKTtcclxuICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvZ2lmJnF1b3Q7L2csIFwiZ2lmJ1wiKTtcclxuICAgICAgICAgICAgZmluYWwucHVzaCgkKGh0bWwpWzBdKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiBmaW5hbDtcclxuICAgIH0sXHJcbiAgICBjbGVhblVud2FudGVkVGFnczogZnVuY3Rpb24gKGJvZHkpIHtcclxuXHJcblxyXG4gICAgICAgIG13LiQoJy5tdy1za2lwLWFuZC1yZW1vdmUsc2NyaXB0JywgYm9keSkucmVtb3ZlKCk7XHJcbiAgICAgICAgcmV0dXJuIGJvZHk7XHJcbiAgICB9LFxyXG4gICAgYW5pbWF0aW9uc0NsZWFyRml4OmZ1bmN0aW9uKGJvZHkpe1xyXG4gICAgICAgIG13LiQoJ1tjbGFzcyo9XCJhbmltYXRlX19cIl0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbXcudG9vbHMuY2xhc3NOYW1lc3BhY2VEZWxldGUodGhpcywgJ2FuaW1hdGVfXycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBib2R5O1xyXG4gICAgfSxcclxuICAgIGNvbGxlY3REYXRhOiBmdW5jdGlvbihlZGl0cykge1xyXG4gICAgICAgIG13LiQoZWRpdHMpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgbXcuJCgnbWV0YScsIHRoaXMpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAkKCcubXctbGUtc3BhY2VyJywgdGhpcykuZW1wdHkoKS5yZW1vdmVBdHRyKCdkYXRhLXJlc2l6YWJsZScpLnJlbW92ZUF0dHIoJ3N0eWxlJylcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZWRpdHMgPSB0aGlzLmh0bWxBdHRyVmFsaWRhdGUoZWRpdHMpO1xyXG4gICAgICAgIHZhciBsID0gZWRpdHMubGVuZ3RoLFxyXG4gICAgICAgICAgICBpID0gMCxcclxuICAgICAgICAgICAgaGVscGVyID0ge30sXHJcbiAgICAgICAgICAgIG1hc3RlciA9IHt9O1xyXG4gICAgICAgIGlmIChsID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaGVscGVyLml0ZW0gPSBlZGl0c1tpXTtcclxuICAgICAgICAgICAgICAgIHZhciByZWwgPSBtdy50b29scy5td2F0dHIoaGVscGVyLml0ZW0sICdyZWwnKTtcclxuICAgICAgICAgICAgICAgIGlmICghcmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbXcuJChoZWxwZXIuaXRlbSkucmVtb3ZlQ2xhc3MoJ2NoYW5nZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBtdy50b29scy5mb3JlYWNoUGFyZW50cyhoZWxwZXIuaXRlbSwgZnVuY3Rpb24obG9vcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xzID0gdGhpcy5jbGFzc05hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWwgPSBtdy50b29scy5td2F0dHIodGhpcywgJ3JlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobXcudG9vbHMuaGFzQ2xhc3MoY2xzLCAnZWRpdCcpICYmIG13LnRvb2xzLmhhc0NsYXNzKGNscywgJ2NoYW5nZWQnKSAmJiAoISFyZWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXIuaXRlbSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdy50b29scy5zdG9wTG9vcChsb29wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHJlbCA9IG13LnRvb2xzLm13YXR0cihoZWxwZXIuaXRlbSwgJ3JlbCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSAhIWhlbHBlci5pdGVtLmlkID8gJyMnK2hlbHBlci5pdGVtLmlkIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdTa2lwcGVkIHNhdmU6IC5lZGl0JytmaWVsZCsnIGVsZW1lbnQgZG9lcyBub3QgaGF2ZSByZWwgYXR0cmlidXRlLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbXcuJChoZWxwZXIuaXRlbSkucmVtb3ZlQ2xhc3MoJ2NoYW5nZWQgb3JpZ19jaGFuZ2VkJyk7XHJcbiAgICAgICAgICAgICAgICBtdy4kKGhlbHBlci5pdGVtKS5yZW1vdmVDbGFzcygnbW9kdWxlLW92ZXInKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtdy4kKCcubW9kdWxlLW92ZXInLCBoZWxwZXIuaXRlbSkuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIG13LiQodGhpcykucmVtb3ZlQ2xhc3MoJ21vZHVsZS1vdmVyJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG13LiQoJ1tjbGFzc10nLCBoZWxwZXIuaXRlbSkuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbHMgPSB0aGlzLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBjbHMgPT09ICdzdHJpbmcnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xzID0gY2xzLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIWNscyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKFwiY2xhc3NcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IG13LmxpdmVFZGl0U2F2ZVNlcnZpY2UuY2xlYW5VbndhbnRlZFRhZ3MoaGVscGVyLml0ZW0pLmlubmVySFRNTDtcclxuICAgICAgICAgICAgICAgIHZhciBhdHRyX29iaiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIGF0dHJzID0gaGVscGVyLml0ZW0uYXR0cmlidXRlcztcclxuICAgICAgICAgICAgICAgIGlmIChhdHRycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFpID0gMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWwgPSBhdHRycy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICg7IGFpIDwgYWw7IGFpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cl9vYmpbYXR0cnNbYWldLm5vZGVOYW1lXSA9IGF0dHJzW2FpXS5ub2RlVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyX29iaixcclxuICAgICAgICAgICAgICAgICAgICBodG1sOiBjb250ZW50XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iamRhdGEgPSBcImZpZWxkX2RhdGFfXCIgKyBpO1xyXG4gICAgICAgICAgICAgICAgbWFzdGVyW29iamRhdGFdID0gb2JqO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYXN0ZXI7XHJcbiAgICB9LFxyXG4gICAgZ2V0RGF0YTogZnVuY3Rpb24ocm9vdCkge1xyXG4gICAgICAgIHZhciBib2R5ID0gbXcubGl2ZUVkaXRTYXZlU2VydmljZS5wYXJzZUNvbnRlbnQocm9vdCkuYm9keSxcclxuICAgICAgICAgICAgZWRpdHMgPSBib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0LmNoYW5nZWQnKTtcclxuICAgICAgICByZXR1cm4gbXcubGl2ZUVkaXRTYXZlU2VydmljZS5jb2xsZWN0RGF0YShlZGl0cyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNhdmVEaXNhYmxlZDogZmFsc2UsXHJcbiAgICBkcmFmdERpc2FibGVkOiBmYWxzZSxcclxuICAgIHNhdmU6IGZ1bmN0aW9uKGRhdGEsIHN1Y2Nlc3MsIGZhaWwpIHtcclxuICAgICAgICBtdy50cmlnZ2VyKCdiZWZvcmVTYXZlU3RhcnQnLCBkYXRhKTtcclxuICAgICAgICAvLyB0b2RvOlxyXG4gICAgICAgIGlmIChtdy5saXZlZWRpdCAmJiBtdy5saXZlZWRpdC5jc3NFZGl0b3IpIHtcclxuICAgICAgICAgICAgbXcubGl2ZWVkaXQuY3NzRWRpdG9yLnB1Ymxpc2hJZkNoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG13LmxpdmVFZGl0U2F2ZVNlcnZpY2Uuc2F2ZURpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIWRhdGEpe1xyXG4gICAgICAgICAgICB2YXIgYm9keSA9IG13LmxpdmVFZGl0U2F2ZVNlcnZpY2UucGFyc2VDb250ZW50KCkuYm9keSxcclxuICAgICAgICAgICAgICAgIGVkaXRzID0gYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdC5jaGFuZ2VkJyk7XHJcbiAgICAgICAgICAgIGRhdGEgPSBtdy5saXZlRWRpdFNhdmVTZXJ2aWNlLmNvbGxlY3REYXRhKGVkaXRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBhbmltYXRpb25zID0gKG13Ll9fcGFnZUFuaW1hdGlvbnMgfHwgW10pLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS5hbmltYXRpb24gIT09ICdub25lJztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYoYW5pbWF0aW9ucyAmJiBhbmltYXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBncm91cDogJ3RlbXBsYXRlJyxcclxuICAgICAgICAgICAgICAgIGtleTogJ2FuaW1hdGlvbnMtZ2xvYmFsJyxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeShhbmltYXRpb25zKVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgbXcub3B0aW9ucy5zYXZlT3B0aW9uKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAvLyBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+ICB7XHJcbiAgICAgICAgICAgIC8vICAgICBtdy5vcHRpb25zLnNhdmVPcHRpb24ob3B0aW9ucywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgLy8gICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBpZiAobXcudG9vbHMuaXNFbXB0eU9iamVjdChkYXRhKSkge1xyXG4gICAgICAgICAgICBpZihzdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3MuY2FsbCh7fSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBtdy5fbGl2ZWVkaXREYXRhID0gZGF0YTtcclxuXHJcbiAgICAgICAgbXcudHJpZ2dlcignc2F2ZVN0YXJ0JywgbXcuX2xpdmVlZGl0RGF0YSk7XHJcblxyXG4gICAgICAgIHZhciB4aHIgPSBtdy5saXZlRWRpdFNhdmVTZXJ2aWNlLmNvcmVTYXZlKG13Ll9saXZlZWRpdERhdGEpO1xyXG4gICAgICAgIHhoci5lcnJvcihmdW5jdGlvbihzZGF0YSl7XHJcblxyXG4gICAgICAgICAgICBpZih4aHIuc3RhdHVzID09IDQwMyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9kYWwgPSBtdy5kaWFsb2coe1xyXG4gICAgICAgICAgICAgICAgICAgIGlkIDogJ3NhdmVfY29udGVudF9lcnJvcl9pZnJhbWVfbW9kYWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGh0bWw6XCI8aWZyYW1lIGlkPSdzYXZlX2NvbnRlbnRfZXJyb3JfaWZyYW1lJyBzdHlsZT0nb3ZlcmZsb3cteDpoaWRkZW47b3ZlcmZsb3cteTphdXRvOycgY2xhc3M9J213LW1vZGFsLWZyYW1lJyA+PC9pZnJhbWU+XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6JCh3aW5kb3cpLndpZHRoKCkgLSA5MCxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6JCh3aW5kb3cpLmhlaWdodCgpIC0gOTBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG13LmFza3VzZXJ0b3N0YXkgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBtdy4kKFwiI3NhdmVfY29udGVudF9lcnJvcl9pZnJhbWVcIikucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlX2NvbnRlbnRfZXJyb3JfaWZyYW1lJykuY29udGVudFdpbmRvdy5kb2N1bWVudDtcclxuICAgICAgICAgICAgICAgICAgICBkb2Mub3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvYy53cml0ZSh4aHIucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICBkb2MuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2F2ZV9jb250ZW50X2Vycm9yX2lmcmFtZV9yZWxvYWRzID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBkb2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZV9jb250ZW50X2Vycm9yX2lmcmFtZScpLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG13LiQoXCIjc2F2ZV9jb250ZW50X2Vycm9yX2lmcmFtZVwiKS5sb2FkKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb3VkZmxhcmUgY2FwdGNoYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNfY2YgPSAgbXcuJCgnLmNoYWxsZW5nZS1mb3JtJyxkb2MpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZV9jb250ZW50X2Vycm9yX2lmcmFtZV9yZWxvYWRzKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpc19jZiAmJiBzYXZlX2NvbnRlbnRfZXJyb3JfaWZyYW1lX3JlbG9hZHMgPT0gMil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXcuYXNrdXNlcnRvc3RheSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG13LiQoJyNzYXZlX2NvbnRlbnRfZXJyb3JfaWZyYW1lX21vZGFsJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxNTApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGZhaWwpe1xyXG4gICAgICAgICAgICAgICAgZmFpbC5jYWxsKHNkYXRhKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgeGhyLnN1Y2Nlc3MoZnVuY3Rpb24oc2RhdGEpIHtcclxuICAgICAgICAgICAgbXcuJCgnLmVkaXQuY2hhbmdlZCcpLnJlbW92ZUNsYXNzKCdjaGFuZ2VkJyk7XHJcbiAgICAgICAgICAgIG13LiQoJy5vcmlnX2NoYW5nZWQnKS5yZW1vdmVDbGFzcygnb3JpZ19jaGFuZ2VkJyk7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC5jaGFuZ2VkJykgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIG13LmxpdmVFZGl0U2F2ZVNlcnZpY2Uuc2F2ZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbXcuYXNrdXNlcnRvc3RheSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgbXcudHJpZ2dlcignc2F2ZUVuZCcsIHNkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihzdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3MuY2FsbChzZGF0YSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICB4aHIuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcclxuICAgICAgICAgICAgbXcudHJpZ2dlcignc2F2ZUZhaWxlZCcsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKTtcclxuICAgICAgICAgICAgaWYoZmFpbCl7XHJcbiAgICAgICAgICAgICAgICBmYWlsLmNhbGwoc2RhdGEpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4geGhyO1xyXG4gICAgfSxcclxuXHJcbn1cclxuXHJcbmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBzYXZlID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBtdy5saXZlRWRpdFNhdmVTZXJ2aWNlLnNhdmUodW5kZWZpbmVkLCAoKSA9PiByZXNvbHZlKHRydWUpLCAoKSA9PiByZXNvbHZlKGZhbHNlKSk7XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgbXcudG9wKCkuYXBwLnNhdmUgPSBhc3luYyAoKSA9PiB7XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzYXZlKClcclxuICAgIH07XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgbXcudG9wKCkuYXBwLmNhbnZhcy5kaXNwYXRjaCgnaWZyYW1lS2V5RG93bicsIHtldmVudH0pXHJcbiAgICB9KVxyXG5cclxufSlcclxuXHJcbnNlbGYub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgbXcudG9wKCkuYXBwLmNhbnZhcy5kaXNwYXRjaCgnbGl2ZUVkaXRDYW52YXNCZWZvcmVVbmxvYWQnKTtcclxuXHJcblxyXG4gICAgLy8gcHJldmVudCB1c2VyIGZyb20gbGVhdmluZyBpZiB0aGVyZSBhcmUgdW5zYXZlZCBjaGFuZ2VzXHJcbiAgICB2YXIgbGl2ZUVkaXRJZnJhbWUgPSAobXcudG9wKCkuYXBwLmNhbnZhcy5nZXRXaW5kb3coKSk7XHJcbiAgICBpZiAobGl2ZUVkaXRJZnJhbWVcclxuICAgICAgICAmJiBsaXZlRWRpdElmcmFtZS5tdyAmJiBsaXZlRWRpdElmcmFtZS5tdy5hc2t1c2VydG9zdGF5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG13LnRvcCgpLnNwaW5uZXIoe2VsZW1lbnQ6IG13LnRvcCgpLmFwcC5jYW52YXMuZ2V0RnJhbWUoKS5wYXJlbnRFbGVtZW50LCBkZWNvcmF0ZTogdHJ1ZSwgc2l6ZTogNTJ9KS5zaG93KClcclxuICAgIH1cclxufTtcclxuXHJcblxyXG5tdy5kcmFnID0gbXcuZHJhZyB8fCB7fTtcclxubXcuZHJhZy5zYXZlID0gZnVuY3Rpb24oKSB7XHJcbiAgIHJldHVybiBtdy5saXZlRWRpdFNhdmVTZXJ2aWNlLnNhdmUoKTtcclxufTtcclxubXcuZHJhZy5maXhfcGxhY2Vob2xkZXJzID0gZnVuY3Rpb24oaXNIYXJkLCBzZWxlY3Rvcikge1xyXG4gICAgc2VsZWN0b3IgPSBzZWxlY3RvciB8fCAnLmVkaXQgLnJvdyc7XHJcblxyXG4gICAgdmFyIG1vcmVfc2VsZWN0b3JzMiA9ICdkaXYuY29sLW1kJztcclxuICAgIHZhciBhID0gbXcudG9wKCkuYXBwLnRlbXBsYXRlU2V0dGluZ3MuaGVscGVyQ2xhc3Nlcy5leHRlcm5hbF9ncmlkc19jb2xfY2xhc3NlcztcclxuICAgIHZhciBpbmRleDtcclxuICAgIGZvciAoaW5kZXggPSBhLmxlbmd0aCAtIDE7IGluZGV4ID49IDA7IC0taW5kZXgpIHtcclxuICAgICAgICBtb3JlX3NlbGVjdG9yczIgKz0gJyxkaXYuJyArIGFbaW5kZXhdO1xyXG4gICAgfVxyXG4gICAgbXcuJChzZWxlY3RvcikuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZWwgPSBtdy4kKHRoaXMpO1xyXG4gICAgICAgIGVsLmNoaWxkcmVuKG1vcmVfc2VsZWN0b3JzMikuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGVtcHR5X2NoaWxkID0gbXcuJCh0aGlzKS5jaGlsZHJlbignKicpO1xyXG4gICAgICAgICAgICBpZiAoZW1wdHlfY2hpbGQuc2l6ZSgpID09IDApIHtcclxuICAgICAgICAgICAgICAgIG13LiQodGhpcykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZWxlbWVudFwiIGlkPVwibXctZWxlbWVudC0nICsgbXcucmFuZG9tKCkgKyAnXCI+JyArICc8L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbXB0eV9jaGlsZCA9IG13LiQodGhpcykuY2hpbGRyZW4oXCJkaXYuZWxlbWVudFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxubXcuZHJhZy5tb2R1bGVfc2V0dGluZ3MgPSAgZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdGFyZ2V0ID0gbXcudG9wKCkuYXBwLmxpdmVFZGl0Lm1vZHVsZUhhbmRsZS5nZXRUYXJnZXQoKTtcclxuICAgIHJldHVybiAgbXcudG9wKCkuYXBwLmVkaXRvci5kaXNwYXRjaCgnb25Nb2R1bGVTZXR0aW5nc1JlcXVlc3QnLCB0YXJnZXQpO1xyXG59O1xyXG5cclxubXcudG9wKCkuYXBwLmNhbnZhcy5vbignY2FudmFzRG9jdW1lbnREb3VibGVDbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgaWYoZXZlbnQgJiYgZXZlbnQudGFyZ2V0KXtcclxuICAgICAgICB2YXIgaGFzUGFyZW50TW9kdWxlID0gbXcudG9vbHMuaGFzUGFyZW50c1dpdGhDbGFzcyhldmVudC50YXJnZXQsICdtb2R1bGUnKTtcclxuICAgICAgICBpZihoYXNQYXJlbnRNb2R1bGUpe1xyXG4gICAgICAgICAgICB2YXIgZmlyc3RNb2R1bGUgPSBtdy50b29scy5maXJzdFBhcmVudE9yQ3VycmVudFdpdGhBbnlPZkNsYXNzZXMoZXZlbnQudGFyZ2V0LCBbJ21vZHVsZSddKTtcclxuICAgICAgICAgICAgdmFyIHNob3VsZFNraXAgPSBtdy50b29scy5oYXNBbnlPZkNsYXNzZXNPbk5vZGVPclBhcmVudChldmVudC50YXJnZXQsIFsnc2FmZS1lbGVtZW50JywgJ25vZHJvcCcsICdhbGxvdy1kcm9wJywgJ21vZHVsZS1sYXlvdXQnXSk7XHJcbiAgICAgICAgICAgIGlmKCFzaG91bGRTa2lwICYmIGZpcnN0TW9kdWxlKXtcclxuICAgICAgICAgICAgICAgIG13LnRvcCgpLmFwcC5lZGl0b3IuZGlzcGF0Y2goJ29uTW9kdWxlU2V0dGluZ3NSZXF1ZXN0JywgZmlyc3RNb2R1bGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC5jdHJsS2V5ICYmIGV2ZW50LmtleSA9PT0gJ3MnKSB7XHJcbiAgICAgICAgcmV0dXJuIG13LnRvcCgpLmFwcC5lZGl0b3IuZGlzcGF0Y2goJ0N0cmwrUycsIGV2ZW50KTtcclxuICAgIH1cclxufSApO1xyXG4iXSwibmFtZXMiOlsiZGF0YSIsImJvZHkiLCJtYXRjaCIsInAxIiwieGhyIiwic2F2ZWRfZGF0YSIsInJvb3QiLCJkb2MiLCJhbGwiLCJsIiwiZWRpdHMiLCJmaW5hbCIsImh0bWwiLCJpIiwiaGVscGVyIiwibWFzdGVyIiwicmVsIiwibG9vcCIsImNscyIsImZpZWxkIiwiY29udGVudCIsImF0dHJfb2JqIiwiYXR0cnMiLCJhaSIsImFsIiwib2JqIiwib2JqZGF0YSIsInN1Y2Nlc3MiLCJmYWlsIiwiYW5pbWF0aW9ucyIsIml0ZW0iLCJvcHRpb25zIiwic2RhdGEiLCJzYXZlX2NvbnRlbnRfZXJyb3JfaWZyYW1lX3JlbG9hZHMiLCJpc19jZiIsImpxWEhSIiwidGV4dFN0YXR1cyIsImVycm9yVGhyb3duIiwic2F2ZSIsInJlc29sdmUiLCJldmVudCIsImxpdmVFZGl0SWZyYW1lIiwiaXNIYXJkIiwic2VsZWN0b3IiLCJtb3JlX3NlbGVjdG9yczIiLCJpbmRleCIsImVsIiwiZW1wdHlfY2hpbGQiLCJ0YXJnZXQiLCJoYXNQYXJlbnRNb2R1bGUiLCJmaXJzdE1vZHVsZSIsInNob3VsZFNraXAiXSwibWFwcGluZ3MiOiJBQUdBLEdBQUcsUUFBUSxZQUFZLEVBQ3ZCLEdBQUcsUUFBUSxjQUFjLEVBR3pCLEdBQUcsb0JBQXNCLENBQ3BCLGFBQWEsU0FBU0EsRUFBSyxDQUV4QixVQUFHLEVBQUUsZ0JBQWlCQSxDQUFJLEVBQUUsT0FBTSxFQUNsQyxHQUFHLEVBQUUsaUJBQWtCQSxDQUFJLEVBQUUsT0FBTSxFQUNuQyxHQUFHLEVBQUUsUUFBU0EsQ0FBSSxFQUFFLEtBQUssVUFBVSxDQUMvQixHQUFHLEVBQUUsSUFBSSxFQUFFLFlBQVksS0FBSyxTQUFTLENBQ2pELENBQVMsRUFDRCxHQUFHLEVBQUUsa0JBQW1CQSxDQUFJLEVBQUUsV0FBVyxlQUFlLEVBQ3hELEdBQUcsRUFBRSxlQUFnQkEsQ0FBSSxFQUFFLFdBQVcsWUFBWSxFQUNsRCxHQUFHLEVBQUUsa0JBQW1CQSxDQUFJLEVBQUUsV0FBVyxlQUFlLEVBQ3hELEdBQUcsRUFBRSxpQkFBa0JBLENBQUksRUFBRSxPQUFNLEVBQ25DLEdBQUcsRUFBRSx5QkFBMEJBLENBQUksRUFBRSxPQUFNLEVBQzNDLEdBQUcsRUFBRSxtQkFBb0JBLENBQUksRUFBRSxPQUFNLEVBQ3JDLEdBQUcsRUFBRSxzQkFBdUJBLENBQUksRUFBRSxPQUFNLEVBQ2pDQSxDQUNWLEVBQ0QsT0FBUSxHQUNSLFNBQVUsU0FBU0EsRUFBTSxDQUNyQixHQUFJLENBQUNBLEVBQU0sTUFBTyxHQUNsQixFQUFFLEtBQUtBLEVBQU0sVUFBVSxDQUNuQixJQUFJQyxFQUFPLEdBQUcsTUFBTSxVQUFVLEtBQUssSUFBSSxFQUFFLEtBQ3pDLEdBQUcsb0JBQW9CLGFBQWFBLENBQUksRUFDeEMsR0FBRyxvQkFBb0IsbUJBQW1CQSxDQUFJLEVBQzlDLEtBQUssS0FBT0EsRUFBSyxTQUM3QixD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
