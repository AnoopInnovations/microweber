var _e=Object.defineProperty;var He=(i,t,e)=>t in i?_e(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var L=(i,t,e)=>(He(i,typeof t!="symbol"?t+"":t,e),e),bt=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)};var g=(i,t,e)=>(bt(i,t,"read from private field"),e?e.call(i):t.get(i)),x=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)},jt=(i,t,e,n)=>(bt(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e);var A=(i,t,e)=>(bt(i,t,"access private method"),e);var N;class Dt{constructor(){x(this,N,{})}on(t,e){g(this,N)[t]?g(this,N)[t].push(e):g(this,N)[t]=[e]}off(t,e){if(g(this,N)[t])if(typeof e=="function"){const n=g(this,N)[t].indexOf(e);if(n===-1)return;g(this,N)[t].splice(n,1)}else g(this,N)[t]=[]}dispatch(t,e){g(this,N)[t]&&g(this,N)[t].forEach(function(n){n.call(this,e)})}emit(t,e){return this.dispatch(t,e)}}N=new WeakMap;var S,j,rt;class Re extends Dt{constructor(){super(...arguments);x(this,j);x(this,S,{})}call(e,n){for(let s in g(this,S))g(this,S)[s][e]&&A(this,j,rt).call(this,e,g(this,S)[s],n)}get(e){return g(this,S)[e]}getModules(){return g(this,S)}register(e,n){let s;typeof n=="function"?s=new n:s=n,g(this,S)[e]=s,this[e]=s,A(this,j,rt).call(this,"onRegister",s),this.dispatch("register")}remove(e){let n;if(typeof e=="string"&&(n=e,e=this.get(e)),!n){for(let s in g(this,S))if(g(this,S)[s]===e){n=s;break}}delete g(this,S)[n],delete this[n],A(this,j,rt).call(this,"onDestroy",e),this.dispatch("remove")}}S=new WeakMap,j=new WeakSet,rt=function(e,n,s){!e||!n||!n[e]||(e=n[e],e(s))};mw.require("editor.js");mw.require("css_parser.js");const xi=function(){var i=document.querySelector("#mw-live-edit-editor"),t=function(){var c={};this.on=function(l,h){c[l]?c[l].push(h):c[l]=[h]},this.dispatch=function(l,h){c[l]&&c[l].forEach(function(p){p.call(this,h)})},this.provide=function(l){this.dispatch("change",l.map(function(h){return{label:h,value:h}}))}},e=new t;window.fontFamilyProvider=e;const n=mw.app.get("canvas").getFrame();n.contentWindow.fontFamilyProvider=e;const s=mw.Editor({document:n.contentWindow.document,executionDocument:n.contentWindow.document,actionWindow:n.contentWindow,element:i,mode:"document",notEditableClasses:["module"],regions:".edit",skin:"le2",editMode:"liveedit",scopeColor:"white",controls:[[{group:{icon:"mdi mdi-format-title",controls:["format","lineHeight"]}},{group:{controller:"bold",controls:["italic","underline","strikeThrough","removeFormat"]}},"fontSelector","fontSize",{group:{controller:"alignLeft",controls:["alignLeft","alignCenter","alignRight","alignJustify"]}},{group:{controller:"ul",controls:["ol"]}},"image",{group:{controller:"link",controls:["unlink"]}},{group:{controller:"textColor",controls:["textBackgroundColor"]}}]],smallEditorPositionX:"center",smallEditorSkin:"lite",interactionControls:[],id:"live-edit-wysiwyg-editor",minHeight:250,maxHeight:"70vh",state:mw.liveEditState,fontFamilyProvider:e});var o=document.getElementById("toolbar-undo"),r=document.getElementById("toolbar-redo");s.state.on("record",function(){r.disabled=!s.state.hasPrev,o.disabled=!s.state.hasNext}),s.state.on("change",function(){r.disabled=!s.state.hasPrev,o.disabled=!s.state.hasNext}),o&&o.addEventListener("click",function(){s.state.undo()}),r&&r.addEventListener("click",function(){s.state.redo()}),i.innerHTML="",i.appendChild(s.wrapper);var a=s.storage.get(s.settings.id+"-small-editor-pinned");typeof a>"u"&&typeof s.smallEditorApi<"u"&&s.smallEditorApi.pin(),mw.app.register("richTextEditor",s),mw.app.register("richTextEditorAPI",s.api)};function se(i,t){return function(){return i.apply(t,arguments)}}const{toString:oe}=Object.prototype,{getPrototypeOf:Mt}=Object,Bt=(i=>t=>{const e=oe.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),R=i=>(i=i.toLowerCase(),t=>Bt(t)===i),ft=i=>t=>typeof t===i,{isArray:Y}=Array,X=ft("undefined");function De(i){return i!==null&&!X(i)&&i.constructor!==null&&!X(i.constructor)&&I(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const re=R("ArrayBuffer");function Me(i){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(i):t=i&&i.buffer&&re(i.buffer),t}const Be=ft("string"),I=ft("function"),ae=ft("number"),Pt=i=>i!==null&&typeof i=="object",Pe=i=>i===!0||i===!1,at=i=>{if(Bt(i)!=="object")return!1;const t=Mt(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},ze=R("Date"),Ie=R("File"),Fe=R("Blob"),Ve=R("FileList"),Ue=i=>Pt(i)&&I(i.pipe),je=i=>{const t="[object FormData]";return i&&(typeof FormData=="function"&&i instanceof FormData||oe.call(i)===t||I(i.toString)&&i.toString()===t)},We=R("URLSearchParams"),qe=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tt(i,t,{allOwnKeys:e=!1}={}){if(i===null||typeof i>"u")return;let n,s;if(typeof i!="object"&&(i=[i]),Y(i))for(n=0,s=i.length;n<s;n++)t.call(null,i[n],n,i);else{const o=e?Object.getOwnPropertyNames(i):Object.keys(i),r=o.length;let a;for(n=0;n<r;n++)a=o[n],t.call(null,i[a],a,i)}}function le(i,t){t=t.toLowerCase();const e=Object.keys(i);let n=e.length,s;for(;n-- >0;)if(s=e[n],t===s.toLowerCase())return s;return null}const ce=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),de=i=>!X(i)&&i!==ce;function Lt(){const{caseless:i}=de(this)&&this||{},t={},e=(n,s)=>{const o=i&&le(t,s)||s;at(t[o])&&at(n)?t[o]=Lt(t[o],n):at(n)?t[o]=Lt({},n):Y(n)?t[o]=n.slice():t[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&tt(arguments[n],e);return t}const $e=(i,t,e,{allOwnKeys:n}={})=>(tt(t,(s,o)=>{e&&I(s)?i[o]=se(s,e):i[o]=s},{allOwnKeys:n}),i),Ye=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),Je=(i,t,e,n)=>{i.prototype=Object.create(t.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:t.prototype}),e&&Object.assign(i.prototype,e)},Ke=(i,t,e,n)=>{let s,o,r;const a={};if(t=t||{},i==null)return t;do{for(s=Object.getOwnPropertyNames(i),o=s.length;o-- >0;)r=s[o],(!n||n(r,i,t))&&!a[r]&&(t[r]=i[r],a[r]=!0);i=e!==!1&&Mt(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t},Xe=(i,t,e)=>{i=String(i),(e===void 0||e>i.length)&&(e=i.length),e-=t.length;const n=i.indexOf(t,e);return n!==-1&&n===e},Ge=i=>{if(!i)return null;if(Y(i))return i;let t=i.length;if(!ae(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=i[t];return e},Ze=(i=>t=>i&&t instanceof i)(typeof Uint8Array<"u"&&Mt(Uint8Array)),Qe=(i,t)=>{const n=(i&&i[Symbol.iterator]).call(i);let s;for(;(s=n.next())&&!s.done;){const o=s.value;t.call(i,o[0],o[1])}},tn=(i,t)=>{let e;const n=[];for(;(e=i.exec(t))!==null;)n.push(e);return n},en=R("HTMLFormElement"),nn=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,s){return n.toUpperCase()+s}),Wt=(({hasOwnProperty:i})=>(t,e)=>i.call(t,e))(Object.prototype),sn=R("RegExp"),he=(i,t)=>{const e=Object.getOwnPropertyDescriptors(i),n={};tt(e,(s,o)=>{t(s,o,i)!==!1&&(n[o]=s)}),Object.defineProperties(i,n)},on=i=>{he(i,(t,e)=>{if(I(i)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=i[e];if(I(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},rn=(i,t)=>{const e={},n=s=>{s.forEach(o=>{e[o]=!0})};return Y(i)?n(i):n(String(i).split(t)),e},an=()=>{},ln=(i,t)=>(i=+i,Number.isFinite(i)?i:t),vt="abcdefghijklmnopqrstuvwxyz",qt="0123456789",ue={DIGIT:qt,ALPHA:vt,ALPHA_DIGIT:vt+vt.toUpperCase()+qt},cn=(i=16,t=ue.ALPHA_DIGIT)=>{let e="";const{length:n}=t;for(;i--;)e+=t[Math.random()*n|0];return e};function dn(i){return!!(i&&I(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const hn=i=>{const t=new Array(10),e=(n,s)=>{if(Pt(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const o=Y(n)?[]:{};return tt(n,(r,a)=>{const c=e(r,s+1);!X(c)&&(o[a]=c)}),t[s]=void 0,o}}return n};return e(i,0)},d={isArray:Y,isArrayBuffer:re,isBuffer:De,isFormData:je,isArrayBufferView:Me,isString:Be,isNumber:ae,isBoolean:Pe,isObject:Pt,isPlainObject:at,isUndefined:X,isDate:ze,isFile:Ie,isBlob:Fe,isRegExp:sn,isFunction:I,isStream:Ue,isURLSearchParams:We,isTypedArray:Ze,isFileList:Ve,forEach:tt,merge:Lt,extend:$e,trim:qe,stripBOM:Ye,inherits:Je,toFlatObject:Ke,kindOf:Bt,kindOfTest:R,endsWith:Xe,toArray:Ge,forEachEntry:Qe,matchAll:tn,isHTMLForm:en,hasOwnProperty:Wt,hasOwnProp:Wt,reduceDescriptors:he,freezeMethods:on,toObjectSet:rn,toCamelCase:nn,noop:an,toFiniteNumber:ln,findKey:le,global:ce,isContextDefined:de,ALPHABET:ue,generateString:cn,isSpecCompliantForm:dn,toJSONObject:hn};function b(i,t,e,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),s&&(this.response=s)}d.inherits(b,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:d.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const me=b.prototype,pe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{pe[i]={value:i}});Object.defineProperties(b,pe);Object.defineProperty(me,"isAxiosError",{value:!0});b.from=(i,t,e,n,s,o)=>{const r=Object.create(me);return d.toFlatObject(i,r,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),b.call(r,i.message,t,e,n,s),r.cause=i,r.name=i.name,o&&Object.assign(r,o),r};const un=null;function Nt(i){return d.isPlainObject(i)||d.isArray(i)}function fe(i){return d.endsWith(i,"[]")?i.slice(0,-2):i}function $t(i,t,e){return i?i.concat(t).map(function(s,o){return s=fe(s),!e&&o?"["+s+"]":s}).join(e?".":""):t}function mn(i){return d.isArray(i)&&!i.some(Nt)}const pn=d.toFlatObject(d,{},null,function(t){return/^is[A-Z]/.test(t)});function gt(i,t,e){if(!d.isObject(i))throw new TypeError("target must be an object");t=t||new FormData,e=d.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,C){return!d.isUndefined(C[f])});const n=e.metaTokens,s=e.visitor||h,o=e.dots,r=e.indexes,c=(e.Blob||typeof Blob<"u"&&Blob)&&d.isSpecCompliantForm(t);if(!d.isFunction(s))throw new TypeError("visitor must be a function");function l(u){if(u===null)return"";if(d.isDate(u))return u.toISOString();if(!c&&d.isBlob(u))throw new b("Blob is not supported. Use a Buffer instead.");return d.isArrayBuffer(u)||d.isTypedArray(u)?c&&typeof Blob=="function"?new Blob([u]):Buffer.from(u):u}function h(u,f,C){let E=u;if(u&&!C&&typeof u=="object"){if(d.endsWith(f,"{}"))f=n?f:f.slice(0,-2),u=JSON.stringify(u);else if(d.isArray(u)&&mn(u)||(d.isFileList(u)||d.endsWith(f,"[]"))&&(E=d.toArray(u)))return f=fe(f),E.forEach(function(nt,ke){!(d.isUndefined(nt)||nt===null)&&t.append(r===!0?$t([f],ke,o):r===null?f:f+"[]",l(nt))}),!1}return Nt(u)?!0:(t.append($t(C,f,o),l(u)),!1)}const p=[],w=Object.assign(pn,{defaultVisitor:h,convertValue:l,isVisitable:Nt});function m(u,f){if(!d.isUndefined(u)){if(p.indexOf(u)!==-1)throw Error("Circular reference detected in "+f.join("."));p.push(u),d.forEach(u,function(E,U){(!(d.isUndefined(E)||E===null)&&s.call(t,E,d.isString(U)?U.trim():U,f,w))===!0&&m(E,f?f.concat(U):[U])}),p.pop()}}if(!d.isObject(i))throw new TypeError("data must be an object");return m(i),t}function Yt(i){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function zt(i,t){this._pairs=[],i&&gt(i,this,t)}const ge=zt.prototype;ge.append=function(t,e){this._pairs.push([t,e])};ge.toString=function(t){const e=t?function(n){return t.call(this,n,Yt)}:Yt;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function fn(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function we(i,t,e){if(!t)return i;const n=e&&e.encode||fn,s=e&&e.serialize;let o;if(s?o=s(t,e):o=d.isURLSearchParams(t)?t.toString():new zt(t,e).toString(n),o){const r=i.indexOf("#");r!==-1&&(i=i.slice(0,r)),i+=(i.indexOf("?")===-1?"?":"&")+o}return i}class gn{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){d.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Jt=gn,ye={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},wn=typeof URLSearchParams<"u"?URLSearchParams:zt,yn=typeof FormData<"u"?FormData:null,bn=typeof Blob<"u"?Blob:null,vn=(()=>{let i;return typeof navigator<"u"&&((i=navigator.product)==="ReactNative"||i==="NativeScript"||i==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),En=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),k={isBrowser:!0,classes:{URLSearchParams:wn,FormData:yn,Blob:bn},isStandardBrowserEnv:vn,isStandardBrowserWebWorkerEnv:En,protocols:["http","https","file","blob","url","data"]};function Cn(i,t){return gt(i,new k.classes.URLSearchParams,Object.assign({visitor:function(e,n,s,o){return k.isNode&&d.isBuffer(e)?(this.append(n,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function xn(i){return d.matchAll(/\w+|\[(\w*)]/g,i).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Ln(i){const t={},e=Object.keys(i);let n;const s=e.length;let o;for(n=0;n<s;n++)o=e[n],t[o]=i[o];return t}function be(i){function t(e,n,s,o){let r=e[o++];const a=Number.isFinite(+r),c=o>=e.length;return r=!r&&d.isArray(s)?s.length:r,c?(d.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!a):((!s[r]||!d.isObject(s[r]))&&(s[r]=[]),t(e,n,s[r],o)&&d.isArray(s[r])&&(s[r]=Ln(s[r])),!a)}if(d.isFormData(i)&&d.isFunction(i.entries)){const e={};return d.forEachEntry(i,(n,s)=>{t(xn(n),s,e,0)}),e}return null}const Nn={"Content-Type":void 0};function Sn(i,t,e){if(d.isString(i))try{return(t||JSON.parse)(i),d.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(i)}const wt={transitional:ye,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",s=n.indexOf("application/json")>-1,o=d.isObject(t);if(o&&d.isHTMLForm(t)&&(t=new FormData(t)),d.isFormData(t))return s&&s?JSON.stringify(be(t)):t;if(d.isArrayBuffer(t)||d.isBuffer(t)||d.isStream(t)||d.isFile(t)||d.isBlob(t))return t;if(d.isArrayBufferView(t))return t.buffer;if(d.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Cn(t,this.formSerializer).toString();if((a=d.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return gt(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||s?(e.setContentType("application/json",!1),Sn(t)):t}],transformResponse:[function(t){const e=this.transitional||wt.transitional,n=e&&e.forcedJSONParsing,s=this.responseType==="json";if(t&&d.isString(t)&&(n&&!this.responseType||s)){const r=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(r)throw a.name==="SyntaxError"?b.from(a,b.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:k.classes.FormData,Blob:k.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};d.forEach(["delete","get","head"],function(t){wt.headers[t]={}});d.forEach(["post","put","patch"],function(t){wt.headers[t]=d.merge(Nn)});const It=wt,On=d.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),An=i=>{const t={};let e,n,s;return i&&i.split(`
`).forEach(function(r){s=r.indexOf(":"),e=r.substring(0,s).trim().toLowerCase(),n=r.substring(s+1).trim(),!(!e||t[e]&&On[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},Kt=Symbol("internals");function J(i){return i&&String(i).trim().toLowerCase()}function lt(i){return i===!1||i==null?i:d.isArray(i)?i.map(lt):String(i)}function Tn(i){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(i);)t[n[1]]=n[2];return t}function kn(i){return/^[-_a-zA-Z]+$/.test(i.trim())}function Et(i,t,e,n,s){if(d.isFunction(n))return n.call(this,t,e);if(s&&(t=e),!!d.isString(t)){if(d.isString(n))return t.indexOf(n)!==-1;if(d.isRegExp(n))return n.test(t)}}function _n(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function Hn(i,t){const e=d.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+e,{value:function(s,o,r){return this[n].call(this,t,s,o,r)},configurable:!0})})}class yt{constructor(t){t&&this.set(t)}set(t,e,n){const s=this;function o(a,c,l){const h=J(c);if(!h)throw new Error("header name must be a non-empty string");const p=d.findKey(s,h);(!p||s[p]===void 0||l===!0||l===void 0&&s[p]!==!1)&&(s[p||c]=lt(a))}const r=(a,c)=>d.forEach(a,(l,h)=>o(l,h,c));return d.isPlainObject(t)||t instanceof this.constructor?r(t,e):d.isString(t)&&(t=t.trim())&&!kn(t)?r(An(t),e):t!=null&&o(e,t,n),this}get(t,e){if(t=J(t),t){const n=d.findKey(this,t);if(n){const s=this[n];if(!e)return s;if(e===!0)return Tn(s);if(d.isFunction(e))return e.call(this,s,n);if(d.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=J(t),t){const n=d.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||Et(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let s=!1;function o(r){if(r=J(r),r){const a=d.findKey(n,r);a&&(!e||Et(n,n[a],a,e))&&(delete n[a],s=!0)}}return d.isArray(t)?t.forEach(o):o(t),s}clear(t){const e=Object.keys(this);let n=e.length,s=!1;for(;n--;){const o=e[n];(!t||Et(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const e=this,n={};return d.forEach(this,(s,o)=>{const r=d.findKey(n,o);if(r){e[r]=lt(s),delete e[o];return}const a=t?_n(o):String(o).trim();a!==o&&delete e[o],e[a]=lt(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return d.forEach(this,(n,s)=>{n!=null&&n!==!1&&(e[s]=t&&d.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[Kt]=this[Kt]={accessors:{}}).accessors,s=this.prototype;function o(r){const a=J(r);n[a]||(Hn(s,r),n[a]=!0)}return d.isArray(t)?t.forEach(o):o(t),this}}yt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);d.freezeMethods(yt.prototype);d.freezeMethods(yt);const H=yt;function Ct(i,t){const e=this||It,n=t||e,s=H.from(n.headers);let o=n.data;return d.forEach(i,function(a){o=a.call(e,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function ve(i){return!!(i&&i.__CANCEL__)}function et(i,t,e){b.call(this,i??"canceled",b.ERR_CANCELED,t,e),this.name="CanceledError"}d.inherits(et,b,{__CANCEL__:!0});function Rn(i,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?i(e):t(new b("Request failed with status code "+e.status,[b.ERR_BAD_REQUEST,b.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const Dn=k.isStandardBrowserEnv?function(){return{write:function(e,n,s,o,r,a){const c=[];c.push(e+"="+encodeURIComponent(n)),d.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),d.isString(o)&&c.push("path="+o),d.isString(r)&&c.push("domain="+r),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Mn(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function Bn(i,t){return t?i.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):i}function Ee(i,t){return i&&!Mn(t)?Bn(i,t):t}const Pn=k.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function s(o){let r=o;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=s(window.location.href),function(r){const a=d.isString(r)?s(r):r;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function zn(i){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return t&&t[1]||""}function In(i,t){i=i||10;const e=new Array(i),n=new Array(i);let s=0,o=0,r;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),h=n[o];r||(r=l),e[s]=c,n[s]=l;let p=o,w=0;for(;p!==s;)w+=e[p++],p=p%i;if(s=(s+1)%i,s===o&&(o=(o+1)%i),l-r<t)return;const m=h&&l-h;return m?Math.round(w*1e3/m):void 0}}function Xt(i,t){let e=0;const n=In(50,250);return s=>{const o=s.loaded,r=s.lengthComputable?s.total:void 0,a=o-e,c=n(a),l=o<=r;e=o;const h={loaded:o,total:r,progress:r?o/r:void 0,bytes:a,rate:c||void 0,estimated:c&&r&&l?(r-o)/c:void 0,event:s};h[t?"download":"upload"]=!0,i(h)}}const Fn=typeof XMLHttpRequest<"u",Vn=Fn&&function(i){return new Promise(function(e,n){let s=i.data;const o=H.from(i.headers).normalize(),r=i.responseType;let a;function c(){i.cancelToken&&i.cancelToken.unsubscribe(a),i.signal&&i.signal.removeEventListener("abort",a)}d.isFormData(s)&&(k.isStandardBrowserEnv||k.isStandardBrowserWebWorkerEnv)&&o.setContentType(!1);let l=new XMLHttpRequest;if(i.auth){const m=i.auth.username||"",u=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";o.set("Authorization","Basic "+btoa(m+":"+u))}const h=Ee(i.baseURL,i.url);l.open(i.method.toUpperCase(),we(h,i.params,i.paramsSerializer),!0),l.timeout=i.timeout;function p(){if(!l)return;const m=H.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),f={data:!r||r==="text"||r==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:m,config:i,request:l};Rn(function(E){e(E),c()},function(E){n(E),c()},f),l=null}if("onloadend"in l?l.onloadend=p:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(p)},l.onabort=function(){l&&(n(new b("Request aborted",b.ECONNABORTED,i,l)),l=null)},l.onerror=function(){n(new b("Network Error",b.ERR_NETWORK,i,l)),l=null},l.ontimeout=function(){let u=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const f=i.transitional||ye;i.timeoutErrorMessage&&(u=i.timeoutErrorMessage),n(new b(u,f.clarifyTimeoutError?b.ETIMEDOUT:b.ECONNABORTED,i,l)),l=null},k.isStandardBrowserEnv){const m=(i.withCredentials||Pn(h))&&i.xsrfCookieName&&Dn.read(i.xsrfCookieName);m&&o.set(i.xsrfHeaderName,m)}s===void 0&&o.setContentType(null),"setRequestHeader"in l&&d.forEach(o.toJSON(),function(u,f){l.setRequestHeader(f,u)}),d.isUndefined(i.withCredentials)||(l.withCredentials=!!i.withCredentials),r&&r!=="json"&&(l.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&l.addEventListener("progress",Xt(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",Xt(i.onUploadProgress)),(i.cancelToken||i.signal)&&(a=m=>{l&&(n(!m||m.type?new et(null,i,l):m),l.abort(),l=null)},i.cancelToken&&i.cancelToken.subscribe(a),i.signal&&(i.signal.aborted?a():i.signal.addEventListener("abort",a)));const w=zn(h);if(w&&k.protocols.indexOf(w)===-1){n(new b("Unsupported protocol "+w+":",b.ERR_BAD_REQUEST,i));return}l.send(s||null)})},ct={http:un,xhr:Vn};d.forEach(ct,(i,t)=>{if(i){try{Object.defineProperty(i,"name",{value:t})}catch{}Object.defineProperty(i,"adapterName",{value:t})}});const Un={getAdapter:i=>{i=d.isArray(i)?i:[i];const{length:t}=i;let e,n;for(let s=0;s<t&&(e=i[s],!(n=d.isString(e)?ct[e.toLowerCase()]:e));s++);if(!n)throw n===!1?new b(`Adapter ${e} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(d.hasOwnProp(ct,e)?`Adapter '${e}' is not available in the build`:`Unknown adapter '${e}'`);if(!d.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:ct};function xt(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new et(null,i)}function Gt(i){return xt(i),i.headers=H.from(i.headers),i.data=Ct.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),Un.getAdapter(i.adapter||It.adapter)(i).then(function(n){return xt(i),n.data=Ct.call(i,i.transformResponse,n),n.headers=H.from(n.headers),n},function(n){return ve(n)||(xt(i),n&&n.response&&(n.response.data=Ct.call(i,i.transformResponse,n.response),n.response.headers=H.from(n.response.headers))),Promise.reject(n)})}const Zt=i=>i instanceof H?i.toJSON():i;function W(i,t){t=t||{};const e={};function n(l,h,p){return d.isPlainObject(l)&&d.isPlainObject(h)?d.merge.call({caseless:p},l,h):d.isPlainObject(h)?d.merge({},h):d.isArray(h)?h.slice():h}function s(l,h,p){if(d.isUndefined(h)){if(!d.isUndefined(l))return n(void 0,l,p)}else return n(l,h,p)}function o(l,h){if(!d.isUndefined(h))return n(void 0,h)}function r(l,h){if(d.isUndefined(h)){if(!d.isUndefined(l))return n(void 0,l)}else return n(void 0,h)}function a(l,h,p){if(p in t)return n(l,h);if(p in i)return n(void 0,l)}const c={url:o,method:o,data:o,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(l,h)=>s(Zt(l),Zt(h),!0)};return d.forEach(Object.keys(i).concat(Object.keys(t)),function(h){const p=c[h]||s,w=p(i[h],t[h],h);d.isUndefined(w)&&p!==a||(e[h]=w)}),e}const Ce="1.3.4",Ft={};["object","boolean","number","function","string","symbol"].forEach((i,t)=>{Ft[i]=function(n){return typeof n===i||"a"+(t<1?"n ":" ")+i}});const Qt={};Ft.transitional=function(t,e,n){function s(o,r){return"[Axios v"+Ce+"] Transitional option '"+o+"'"+r+(n?". "+n:"")}return(o,r,a)=>{if(t===!1)throw new b(s(r," has been removed"+(e?" in "+e:"")),b.ERR_DEPRECATED);return e&&!Qt[r]&&(Qt[r]=!0,console.warn(s(r," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(o,r,a):!0}};function jn(i,t,e){if(typeof i!="object")throw new b("options must be an object",b.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let s=n.length;for(;s-- >0;){const o=n[s],r=t[o];if(r){const a=i[o],c=a===void 0||r(a,o,i);if(c!==!0)throw new b("option "+o+" must be "+c,b.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new b("Unknown option "+o,b.ERR_BAD_OPTION)}}const St={assertOptions:jn,validators:Ft},D=St.validators;class ut{constructor(t){this.defaults=t,this.interceptors={request:new Jt,response:new Jt}}request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=W(this.defaults,e);const{transitional:n,paramsSerializer:s,headers:o}=e;n!==void 0&&St.assertOptions(n,{silentJSONParsing:D.transitional(D.boolean),forcedJSONParsing:D.transitional(D.boolean),clarifyTimeoutError:D.transitional(D.boolean)},!1),s!==void 0&&St.assertOptions(s,{encode:D.function,serialize:D.function},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let r;r=o&&d.merge(o.common,o[e.method]),r&&d.forEach(["delete","get","head","post","put","patch","common"],u=>{delete o[u]}),e.headers=H.concat(r,o);const a=[];let c=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(e)===!1||(c=c&&f.synchronous,a.unshift(f.fulfilled,f.rejected))});const l=[];this.interceptors.response.forEach(function(f){l.push(f.fulfilled,f.rejected)});let h,p=0,w;if(!c){const u=[Gt.bind(this),void 0];for(u.unshift.apply(u,a),u.push.apply(u,l),w=u.length,h=Promise.resolve(e);p<w;)h=h.then(u[p++],u[p++]);return h}w=a.length;let m=e;for(p=0;p<w;){const u=a[p++],f=a[p++];try{m=u(m)}catch(C){f.call(this,C);break}}try{h=Gt.call(this,m)}catch(u){return Promise.reject(u)}for(p=0,w=l.length;p<w;)h=h.then(l[p++],l[p++]);return h}getUri(t){t=W(this.defaults,t);const e=Ee(t.baseURL,t.url);return we(e,t.params,t.paramsSerializer)}}d.forEach(["delete","get","head","options"],function(t){ut.prototype[t]=function(e,n){return this.request(W(n||{},{method:t,url:e,data:(n||{}).data}))}});d.forEach(["post","put","patch"],function(t){function e(n){return function(o,r,a){return this.request(W(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:r}))}}ut.prototype[t]=e(),ut.prototype[t+"Form"]=e(!0)});const dt=ut;class Vt{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const r=new Promise(a=>{n.subscribe(a),o=a}).then(s);return r.cancel=function(){n.unsubscribe(o)},r},t(function(o,r,a){n.reason||(n.reason=new et(o,r,a),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}static source(){let t;return{token:new Vt(function(s){t=s}),cancel:t}}}const Wn=Vt;function qn(i){return function(e){return i.apply(null,e)}}function $n(i){return d.isObject(i)&&i.isAxiosError===!0}const Ot={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ot).forEach(([i,t])=>{Ot[t]=i});const Yn=Ot;function xe(i){const t=new dt(i),e=se(dt.prototype.request,t);return d.extend(e,dt.prototype,t,{allOwnKeys:!0}),d.extend(e,t,null,{allOwnKeys:!0}),e.create=function(s){return xe(W(i,s))},e}const v=xe(It);v.Axios=dt;v.CanceledError=et;v.CancelToken=Wn;v.isCancel=ve;v.VERSION=Ce;v.toFormData=gt;v.AxiosError=b;v.Cancel=v.CanceledError;v.all=function(t){return Promise.all(t)};v.spread=qn;v.isAxiosError=$n;v.mergeConfig=W;v.AxiosHeaders=H;v.formToJSON=i=>be(d.isHTMLForm(i)?new FormData(i):i);v.HttpStatusCode=Yn;v.default=v;const mt=v;class _{static extend(){const t={};let e=!1,n=0;const s=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(e=arguments[0],n++);const o=function(r){for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e&&Object.prototype.toString.call(r[a])==="[object Object]"?t[a]=_.extend(!0,t[a],r[a]):t[a]=r[a])};for(;n<s;n++){const r=arguments[n];o(r)}return t}}var F=function(i,t){var e=this;this.isMWElement=!0,this.toggle=function(){this.css("display",this.css("display")==="none"?"block":"none")},this._active=function(){return this.nodes[this.nodes.length-1]},this.getDocument=function(){return this._active().ownerDocument},this.getWindow=function(){return this.getDocument().defaultView},this.get=function(s,o){this.nodes=(o||document).querySelectorAll(s)},this.each=function(s){if(this.nodes)for(var o=0;o<this.nodes.length;o++)s.call(this.nodes[o],o);else this.node&&s.call(this.node,0);return this},this.encapsulate=function(){};var n=function(s,o){s&&(Array.isArray(s)?s.forEach(function(r){n(r,o)}):s instanceof F?o.append(s):typeof s=="object"&&o.append(new F(s)))};this.create=function(){var s=this.document.createElement(this.settings.tag);if(this.node=s,this.settings.encapsulate===!0){var o=this.settings.encapsulate===!0?"open":this.settings.encapsulate;s.attachShadow({mode:o})}this.nodes=[s],this.settings.content&&n(this.settings.content,this)},this._specialProps=function(s,o){if(s==="tooltip")return this.node.dataset[s]=o,!0},this.setProps=function(){for(var s in this.settings.props)if(s==="dataset")for(var o in this.settings.props[s])this.node.dataset[o]=this.settings.props[s][o];else if(s==="style")for(var r in this.settings.props[s])this.node.style[r]=this.settings.props[s][r];else{var a=this.settings.props[s];this._specialProps(s,a)||(this.node[s]=a)}},this.__={cssNumber:["animationIterationCount","columnCount","fillOpacity","flexGrow","flexShrink","fontWeight","gridArea","gridColumn","gridColumnEnd","gridColumnStart","gridRow","gridRowEnd","gridRowStart","lineHeight","opacity","order","orphans","widows","zIndex","zoom"]},this._normalizeCSSValue=function(s,o){return typeof o=="number"&&this.__.cssNumber.indexOf(s)===-1&&(o=o+"px"),o},this.css=function(s,o){if(typeof s=="string")if(typeof o<"u"){var r=this._normalizeCSSValue(s,o);this.each(function(){this.style[s]=r})}else return this.document.defaultView.getComputedStyle(this.node)[s];if(typeof s=="object")for(var a in s)this.each(function(){this.style[a]=e._normalizeCSSValue(a,s[a])});return this},this.dataset=function(s,o){return typeof o>"u"?this._active()[s]:(this.each(function(){this.dataset[s]=o}),this)},this.attr=function(s,o){return typeof o>"u"?this._active()[s]:(this.each(function(){this.setAttribute(s,o)}),this)},this.val=function(s){return typeof s>"u"?this._active().value:(this.each(function(){this.value=s}),this)},this.prop=function(s,o){var r=this._active();return typeof o>"u"?r[s]:(r[s]!==o&&(r[s]=o,this.trigger("propChange",[s,o])),this)},this.hide=function(){return this.each(function(){this.style.display="none"})},this.show=function(){return this.each(function(){this.style.display=""})},this.find=function(s){var o=mw.element("#r"+new Date().getTime());return this.each(function(){for(var r=this.querySelectorAll(s),a=0;a<r.length;a++)o.nodes.indexOf(r[a])===-1&&o.nodes.push(r[a])}),o},this.addClass=function(s){return s=s.trim().split(" "),this.each(function(){var o=this;s.forEach(function(r){o.classList.add(r)})})},this.toggleClass=function(s){return this.each(function(){this.classList.toggle(s.trim())})},this.removeClass=function(s){var o=Array.isArray(s);if(o)return this.each(function(){for(var a=0,c=s.length;a<c;a++)this.classList.remove(s[a])});s=s.trim();var r=s.split(" ");return r.length>1?this.removeClass(r):this.each(function(){this.classList.remove(s)})},this.remove=function(){return this.each(function(){this.remove()})},this.empty=function(){return this.html("")},this.html=function(s){return typeof s>"u"?this._active().innerHTML:this.each(function(){this.innerHTML=s})},this.text=function(s,o){if(typeof s>"u")return this.node.textContent;typeof o>"u"&&(o=!0),o&&(s=this.document.createRange().createContextualFragment(s).textContent),this.node.innerHTML=s},this._asdom=function(s){return typeof s=="string"?this.document.createRange().createContextualFragment(s):s.node?s.node:s.nodes?s.nodes[s.nodes.length-1]:s},this.offset=function(){var s=this._active(),o=this.getWindow(),r=s.getBoundingClientRect();return r.offsetTop=r.top+o.pageYOffset,r.offsetBottom=r.bottom+o.pageYOffset,r.offsetLeft=r.left+o.pageXOffset,r},this.width=function(s){return s?this.css("width",s):this._active().offsetWidth},this.height=function(s){return s?this.css("height",s):this._active().offsetHeight},this.parent=function(){return mw.element(this._active().parentNode)},this.parents=function(s){s=s||"*";var o=this._active(),r=o.parentElement,a=mw.element();for(a.nodes=[];r;)r.matches(s)&&a.nodes.push(r),r=r.parentElement;return a},this.append=function(s){return s&&this.each(function(){this.append(e._asdom(s))}),this},this.before=function(s){return s&&this.each(function(){this.parentNode&&this.parentNode.insertBefore(e._asdom(s),this)}),this},this.after=function(s){s&&this.each(function(){this.parentNode&&this.parentNode.insertBefore(e._asdom(s),this.nextSibling)})},this.prepend=function(s){return s&&this.each(function(){this.prepend(e._asdom(s))}),this},this._disabled=!1,Object.defineProperty(this,"disabled",{get:function(){return this._disabled},set:function(s){this._disabled=s,this.node.disabled=this._disabled,this.node.dataset.disabled=this._disabled}}),this.trigger=function(s,o){return o=o||{},this.each(function(){this.dispatchEvent(new CustomEvent(s,{detail:o,cancelable:!0,bubbles:!0})),e._on[s]&&e._on[s].forEach(function(r){r.call(this,s,o)})}),this},this.get=function(s){return this.nodes[s]},this.wrap=function(s){var o=Ut(s);this.before(o),o.append(this)},this._on={},this.on=function(s,o){return s=s.trim().split(" "),s.forEach(function(r){e._on[r]||(e._on[r]=[]),e._on[r].push(o),e.each(function(){this.addEventListener(r,o,!1)})}),this},this.init=function(){if(this.nodes=[],this.root=t||document,this.root instanceof F&&(this.root=this.root.get(0)),this._asElement=!1,this.document=this.root.body?this.root:this.root.ownerDocument,i=i||{},i.nodeName&&i.nodeType)this.nodes.push(i),this.node=i,i={},this._asElement=!0;else if(typeof i=="string")if(i.indexOf("<")===-1)this.nodes=Array.prototype.slice.call(this.root.querySelectorAll(i)),i={},this._asElement=!0;else if(this.settings&&this.settings.content instanceof F)this.append(this.settings.content);else if(this.settings&&typeof this.settings.content=="object")this.append(new F(this.settings.content));else{var s=this._asdom(i);this.nodes=[].slice.call(s.children),this._asElement=!0}i=i||{};var o={tag:"div",props:{}};this.settings=_.extend({},o,i),!this._asElement&&(this.create(),this.setProps())},this.init()};const Ut=function(i,t){return new F(i,t)};Ut.module=function(i,t){F.prototype[i]=t};const At="mw-le-element";window.customElements&&!customElements.get(At)&&customElements.define(At,class extends HTMLElement{constructor(){super()}});const y=(i,t)=>(i instanceof Object&&!i.nodeType&&(i=_.extend({},i||{},{tag:i.tag||At})),Ut(i,t));let K;const it=document.documentElement;it.matches?K="matches":it.matchesSelector?K="matchesSelector":it.mozMatchesSelector?K="mozMatchesSelector":it.webkitMatchesSelector&&(K="webkitMatchesSelector");class O{static fragment(){return this._fragment||(this._fragment=document.createElement("div"),this._fragment.style.visibility="hidden",this._fragment.style.position="absolute",this._fragment.style.width="1px",this._fragment.style.height="1px",document.body.appendChild(this._fragment)),this._fragment}static matches(t,e){return t[K](e)}static isBlockLevel(t){if(!t||t.nodeType===3)return!1;var e=t.nodeName;if(typeof this._isBlockCache[e]<"u")return this._isBlockCache[e];var n=document.createElement(e);return this.fragment().appendChild(n),this._isBlockCache[e]=getComputedStyle(n).display==="block",this.fragment().removeChild(n),this._isBlockCache[e]}static firstBlockLevel(t){for(;t&&t.classList;){if(this.isBlockLevel(t))return t;t=t.parentNode}}static firstWithBackgroundImage(t){if(!t)return null;for(;t&&t.nodeName!=="BODY";){if(t.style.backgroundImage)return t;t=t.parentElement}return null}static hasAnyOfClassesOnNodeOrParent(t,e){for(;t&&t.nodeName!=="BODY";){let n=0,s=e.length;for(;n<s;n++)if(t.classList.contains(e[n]))return!0;t=t.parentElement}return!1}static hasParentsWithClass(t,e){if(t){for(var n=t.parentNode;n&&n.nodeName!=="BODY";){if(n.classList.contains(e))return!0;n=n.parentNode}return!1}}static hasParentWithId(t,e){if(t){for(var n=t.parentNode;n&&n.nodeName!=="BODY";){if(n.id===e)return!0;n=n.parentNode}return!1}}static firstWithAyOfClassesOnNodeOrParent(t,e){for(;t&&t.nodeName!=="BODY";){let n=0,s=e.length;for(;n<s;n++)if(t.classList.contains(e[n]))return t;t=t.parentElement}return null}static firstParentOrCurrentWithTag(t,e){if(!(!t||!e)){e=typeof e!="string"?e:[e];for(var n=t;n&&n.nodeName!=="BODY";){if(e.indexOf(n.nodeName.toLowerCase())!==-1)return n;n=n.parentNode}return!1}}static index(t,e,n){n=n||t.tagName.toLowerCase(),e=e||t.parentNode;var s;e.constructor===[].constructor?s=e:s=e.querySelectorAll(n);for(var o=0,r=s.length;o<r;o++)if(t===s[o])return o}static firstParentOrCurrentWithClass(t,e){if(!t)return!1;for(var n=t;n&&n.nodeName!=="BODY";){if(n.classList.contains(e))return n;n=n.parentNode}return!1}static firstParentOrCurrent(t,e){if(!t)return!1;for(var n=t;n&&n.nodeName!=="BODY";){if(n.matches(e))return n;n=n.parentNode}return!1}static firstParentOrCurrentWithAnyOfClasses(t,e){if(!t)return!1;for(var n=t;n&&n.nodeName!=="BODY";){if(!n)return!1;if(this.hasAnyOfClasses(n,e))return n;n=n.parentNode}return!1}static parentsOrCurrentOrderMatchOrOnlyFirst(t,e){let n=t;for(;n&&n.nodeName!=="BODY";){const s=n.classList.contains(e[0]),o=n.classList.contains(e[1]);if(s&&o)return!1;if(s)return!0;if(o)return!1;n=n.parentNode}return!1}static parentsOrCurrentOrderMatchOrOnlyFirstOrNone(t,e){let n=t;for(;n&&n.nodeName!=="BODY";){const s=n.classList.contains(e[0]),o=n.classList.contains(e[1]);if(s&&o)return!1;if(s)return!0;if(o)return!1;n=n.parentNode}return!0}static hasAnyOfClasses(t,e){if(!t)return;let n=0,s=e.length;for(;n<s;n++)if(t.classList.contains(e[n]))return!0;return!1}static offset(t){if(t){var e=t.getBoundingClientRect(),n={top:e.top,left:e.left,width:e.width,height:e.height,bottom:e.bottom,right:e.right};return n.top+=t.ownerDocument.defaultView.scrollY,n.bottom+=t.ownerDocument.defaultView.scrollY,n.left+=t.ownerDocument.defaultView.scrollX,n.right+=t.ownerDocument.defaultView.scrollX,n}}static parentsOrder(t,e){for(var n=[],s={},o=e.length,r=0,a=-1;r<o;r++)s[e[r]]=-1;if(!t)return s;for(var c=t.parentNode;c&&c.nodeName!=="BODY";){for(a++,r=0;r<o;r++)c.classList.contains(e[r])&&n.indexOf(e[r])===-1&&(s[e[r]]=a,n.push(e[r]));c=c.parentNode}return s}}L(O,"_isBlockCache",{}),L(O,"_fragment");class Jn{constructor(t){this.settings=t,this.tools=O}isRow(t){return t.classList.contains(this.settings.rowClass)}isModule(t){return t.classList.contains(this.settings.moduleClass)&&t.dataset.type!=="layouts"}isLayout(t){return t.classList.contains(this.settings.moduleClass)&&t.dataset.type==="layouts"}isInLayout(t){if(!t)return!1;for(t=t.parentNode;t&&t!==this.settings.document.body;){if(t.classList.contains(this.settings.moduleClass)&&t.dataset.type==="layouts")return!0;t=t.parentNode}}isElement(t){return t.classList.contains(this.settings.elementClass)}isEmptyElement(t){return t.classList.contains(this.settings.emptyElementClass)}isEdit(t){return t.classList.contains(this.settings.editClass)}isInEdit(t){var e=[this.settings.editClass,this.settings.moduleClass];return this.tools.parentsOrCurrentOrderMatchOrOnlyFirst(t.parentNode,e)}isEditOrInEdit(t){return this.isEdit(t)||this.isInEdit(t)}isPlainText(t){return t.classList.contains(this.settings.plainElementClass)}getType(t){if(this.isEdit(t))return"edit";if(this.isElement(t))return"element";if(this.isModule(t))return"module";if(this.isLayout(t))return"layout"}}class Le extends Jn{constructor(t){super(t),this.settings=t,this._tagsCanAccept=["DIV","ARTICLE","ASIDE","FOOTER","HEADER","MAIN","SECTION","DD","LI","TD","FORM","DD"],this.init()}isConfigurable(t){return this.isElement(t)||this.isModule(t)||this.isRow(t)}isEditableLayout(t){return this.this.isLayout(t)&&this.isInEdit(t)}canMoveModule(t){return this.isModule(t)&&this.isInEdit(t)}canAcceptByClass(t){return this.tools.hasAnyOfClasses(t,this.dropableElements())}canAcceptByTag(t){return!t||t.nodeType!==1?!1:this._tagsCanAccept.indexOf(t.nodeName)!==-1}allowDrop(t){return this.tools.parentsOrCurrentOrderMatchOrOnlyFirstOrNone(t,[this.settings.allowDrop,this.settings.nodrop])}canInsertBeforeOrAfter(t){return this.canAccept(t.parentNode)}canAccept(t){return!!(this.canAcceptByClass(t)&&this.isEditOrInEdit(t)&&this.allowDrop(t))}canReceiveElements(t){return this.isEdit(t)&&this.canAcceptByTag(t)}dropableElements(){return this._dropableElements}getIteractionTarget(t){return this.tools.firstWithAyOfClassesOnNodeOrParent(t,[this.settings.elementClass,this.settings.editClass,this.settings.moduleClass])}getTarget(t,e){const n=this.getIteractionTarget(t);if(!n||!this.isEditOrInEdit(t)||!this.allowDrop(t))return null;const s={target:n,canInsert:!1,beforeAfter:!1};var o=this.settings.strictLayouts&&this.isLayout(e),r=this.settings.strict&&!this.isLayout(e)&&!this.isInLayout(n);if(r)return null;if(this.isEdit(n))s.canInsert=!o;else if(this.isElement(n)&&!o)this.canAcceptByTag(n)&&(s.canInsert=!o),s.beforeAfter=!0;else if(this.isModule(n)&&!o)if(this.canInsertBeforeOrAfter(n))s.beforeAfter=!0;else return null;else if(this.isLayout(n))if(this.canInsertBeforeOrAfter(n))s.beforeAfter=!0;else return null;return s}init(){this._dropableElements=[this.settings.elementClass,this.settings.cloneableClass,this.settings.editClass,this.settings.moduleClass,this.settings.colClass,this.settings.allowDrop]}}let Kn=-1;const Xn=(i,t)=>{if(!i||!t)return!1;const e=t.target;if(!e||e.nodeType!==1)return!1;i.pageX;const n=i.pageY,s=O.offset(e),o={},r=15;if(Kn===n||!t||!t.canInsert&&!t.beforeAfter)return!1;if(t.canInsert&&t.beforeAfter)if(n>=s.top-r&&n<=s.top+r)o.position="top",o.action="before";else if(n>=s.top+r&&n<=s.top+s.height/2)o.position="top",o.action="prepend";else if(n>=s.top+s.height/2&&n<=s.bottom-r)o.position="bottom",o.action="append";else if(n>=s.top+s.height/2&&n>=s.bottom-r)o.position="bottom",o.action="after";else return!1;else if(t.beforeAfter)if(n>=s.top-r&&n<=s.top+s.height/2)o.position="top",o.action="before";else if(n>=s.top+s.height/2&&n<=s.bottom+r)o.position="bottom",o.action="after";else return!1;else if(t.canInsert)if(n>=s.top-r&&n<=s.top+s.height/2)o.position="top",o.action="prepend";else if(n>=s.top+s.height/2&&n<=s.bottom+r)o.position="bottom",o.action="append";else return!1;return o},Gn=function(i,t){var e={handle:null,element:null,document,helper:!0},n=this,s={};this.on=function(r,a){s[r]?s[r].push(a):s[r]=[a]},this.dispatch=function(r,a){s[r]&&s[r].forEach(function(c){c.call(this,a)})};var o=function(r){n.settings.document.body.style.scrollBehavior="smooth",n.settings.document.defaultView.scrollTo(0,n.settings.document.defaultView.scrollY+r),n.settings.document.body.style.scrollBehavior=""};this.config=function(){this.settings=_.extend({},e,i),this.settings.target||(this.settings.target=this.settings.document.body),this.setElement(this.settings.element),this.dropIndicator=this.settings.dropIndicator},this.setElement=function(r){this.element=y(r).get(0),this.settings.handle||(this.settings.handle=this.settings.element),this.handle=this.settings.handle,this.handle.attr("draggable","true")},this.setTargets=function(r){this.targets=y(r)},this.addTarget=function(r){this.targets.push(r)},this.init=function(){this.config(),this.draggable()},this.helper=function(r){return this._helper||(this._helper=y().get(0),this._helper.className="mw-draggable-helper",this.settings.document.body.appendChild(this._helper)),r==="create"?(this._helper.style.top=r.pageY+"px",this._helper.style.left=r.pageX+"px",this._helper.style.width=n.element.offsetWidth+"px",this._helper.style.height=n.element.offsetHeight+"px",this.settings.document.documentElement.classList.add("le-dragging"),this._helper.style.display="block"):r==="remove"&&this._helper?(this._helper.style.display="none",this.settings.document.documentElement.classList.remove("le-dragging")):this.settings.helper&&r&&(this._helper.style.top=r.pageY+"px",this._helper.style.left=r.pageX+"px",this._helper.style.maxWidth=n.settings.document.defaultView.innerWidth-r.pageX-40+"px",this.settings.document.documentElement.classList.add("le-dragging")),this._helper},this.isDragging=!1,this.dropableService=new Le(t),this.dropPosition=Xn,this.draggable=function(){y(this.settings.target).on("dragleave",function(r){n.dropIndicator.hide()}),y(this.settings.target).on("dragover",function(r){if(n.target=null,n.action=null,r.target!==n.element||!n.element.contains(r.target)){var a=n.dropableService.getTarget(r.target,n.element);if(a&&a!==n.element){const c=n.dropPosition(r,a);c?(n.target=a.target,n.action=c.action,n.dropIndicator.position(n.target,c.action+"-"+c.position)):n.dropIndicator.hide()}else n.dropIndicator.hide();n.isDragging&&(n.dispatch("dragOver",{element:n.element,event:r}),r.preventDefault())}}).on("drop",function(r){n.isDragging&&(r.preventDefault(),n.target&&n.action&&y(n.target)[n.action](n.element),n.dropIndicator.hide(),n.dispatch("drop",{element:n.element,event:r})),n.dropIndicator.hide()}),this.handle.on("dragstart",function(r){n.isDragging=!0,n.element.id||(n.element.id="mw-element-"+new Date().getTime()),n.element.classList.add("mw-element-is-dragged"),r.dataTransfer.setData("text",n.element.id),r.dataTransfer.effectAllowed="move",n.helper("create"),n.dispatch("dragStart",{element:n.element,event:r})}).on("drag",function(r){var a=90,c=5;r.clientY<a&&o(-c),r.clientY>innerHeight-(a+(this._helper?this._helper.offsetHeight+10:0))&&o(c),r.dataTransfer.dropEffect="copy",n.dispatch("drag",{element:n.element,event:r}),n.helper(r)}).on("dragend",function(r){n.isDragging=!1,n.element.classList.remove("mw-element-is-dragged"),n.helper("remove"),n.dispatch("dragEnd",{element:n.element,event:r})})},this.init()};var B;class Ne{constructor(t={}){L(this,"x",0);L(this,"y",0);L(this,"w",0);L(this,"h",0);L(this,"listeners",{});x(this,B,{});L(this,"activeHandle",null);L(this,"handles",{});const e={element:null,document,maxHeight:null,maxWidth:null};this.settings=Object.assign({},e,t),this.element=this.settings.element,this.document=this.settings.document,this.element.classList.add("mw-le-resizable")}on(t,e){g(this,B)[t]?g(this,B)[t].push(e):g(this,B)[t]=[e]}dispatch(t,e){g(this,B)[t]&&g(this,B)[t].forEach(n=>{n.call(this,e)})}mouseMoveHandler(t){const e=t.clientX-this.x,n=t.clientY-this.y;let s=this.h+n,o;this.activeHandle===this.handles.left?o=this.w-e:o=this.w+e,this.settings.maxWidth&&(o=Math.min(o,this.settings.maxWidth)),this.settings.maxHeight&&(s=Math.min(s,this.settings.maxHeight)),this.element.style.width=`${o}px`,this.element.style.height=`${s}px`,t.preventDefault(),this.dispatch("resize",{height:this.element.offsetHeight,width:this.element.offsetWidth})}mouseUpHandler(){for(const t in this.listeners)this.document.removeEventListener(t,this.listeners[t]);this.listeners={},this.activeHandle=null,this.dispatch("resizeStop")}mouseDownHandler(t){this.x=t.clientX,this.y=t.clientY;const e=this.document.defaultView.getComputedStyle(this.element);this.w=parseInt(e.width,10),this.h=parseInt(e.height,10),this.listeners.mousemove=n=>this.mouseMoveHandler(n),this.listeners.mouseup=n=>this.mouseUpHandler(n);for(const n in this.listeners)this.document.addEventListener(n,this.listeners[n]);this.dispatch("resizeStart")}build(){const t=this.document.createElement("span"),e=this.document.createElement("span"),n=this.document.createElement("span"),s=this.document.createElement("span");this.handles.top=t,this.handles.right=e,this.handles.bottom=n,this.handles.left=s,t.className="mw-le-resizer mw-le-resizer-t",e.className="mw-le-resizer mw-le-resizer-r",s.className="mw-le-resizer mw-le-resizer-l",n.className="mw-le-resizer mw-le-resizer-b",this.element.appendChild(t),this.element.appendChild(e),this.element.appendChild(n),this.element.appendChild(s)}mount(){if(!this.element)return this;if(this.element.dataset.resizable)return this;this.element.dataset.resizable=!0,this.build();const t=this.element.querySelectorAll(".mw-le-resizer");return Array.from(t).forEach(e=>{e.addEventListener("mousedown",n=>{this.mouseDownHandler(n),this.activeHandle=e})}),this.dispatch("ready",{height:this.element.offsetHeight,width:this.element.offsetWidth}),this}}B=new WeakMap;globalThis.Resizable=Ne;const st=function(i){var t={},e=this;this.settings=_.extend({},t,i);const n={};this.on=(l,h)=>{n[l]?n[l].push(h):n[l]=[h]},this.dispatch=(l,h)=>{n[l]&&n[l].forEach(p=>{p.call(this,h)})};var s=!0,o=null;this.getTarget=function(){return o},this.isVisible=function(){return s},this.show=function(){s=!0,this.wrapper.removeClass("mw-handle-item-hidden")},this.hide=function(){s=!1,this.wrapper.addClass("mw-handle-item-hidden"),this.wrapper.removeClass("mw-handle-active")};let r=null;this.setContent=function(l){r&&r.remove(),r=l,this.wrapper.append(r)},this.initDraggable=function(){this.draggable=new Gn({handle:this.handle,element:null,helper:!0,dropIndicator:this.settings.dropIndicator,document:this.settings.document,target:this.settings.root,stateManager:this.settings.stateManager,type:this.settings.type},i),this.draggable.on("dragStart",function(){e.wrapper.addClass("mw-handle-item-dragging")}),this.draggable.on("dragEnd",function(){e.wrapper.removeClass("mw-handle-item-dragging")})},this.set=function(l){if(!l){o=null;return}var h=O.offset(l);this.wrapper.css({top:h.top,left:h.left,width:h.width,height:h.height}),this.show(),this.draggable.setElement(l),o!==l&&(o=l,this.dispatch("targetChange",l)),setTimeout(()=>this.wrapper.addClass("mw-handle-active"),1)},this.createHandle=function(){this.settings.handle?this.handle=this.settings.handle:(this.handle=y({tag:"div",props:{className:"mw-handle-item-handle",contentEditable:!1,draggable:!0}}),this.wrapper.append(this.handle))};var a=this.settings.document.defaultView.innerWidth,c=this.settings.document.defaultView.innerHeight;this.resizableMaxWidth=function(l){if(typeof l>"u")return a;a=l},this.resizableMaxHeight=function(l){if(typeof l>"u")return c;c=l},this.findClosestElementByClass=function(l,h=200){let p=[],w=l,m=0;for(;w!==document;){const u=w.parentNode.querySelectorAll(".element,.module");if(u.length>0&&(p=[...u].filter(f=>Math.abs(l.getBoundingClientRect().top-f.getBoundingClientRect().top)<=h),p.length>0)||(w=w.parentNode,m++,m>h/10))break}return p},this.resizable=function(){this.settings.resizable&&(this.resizer=new Ne({element:this.wrapper.get(0),document:this.settings.document}),this.resizer.mount(),this.resizer.on("resize",l=>{const h=this.getTarget();h&&(h.style.minHeight=l.height+"px",h.style.width=l.width+"px")}))},this.createWrapper=function(){this.wrapper=y({tag:"div",props:{className:"mw-handle-item "+(this.settings.className||"mw-handle-type-default"),id:this.settings.id||"mw-handle-"+new Date().getTime(),contentEditable:!1}}),this.wrapper.on("mousedown",function(){this.classList.remove("mw-handle-item-mouse-down")}),y(document.body).on("mouseup touchend",function(){e.wrapper.removeClass("mw-handle-item-mouse-down")}),this.settings.document.body.appendChild(this.wrapper.get(0))},this.createWrapper(),this.createHandle(),this.initDraggable(),this.settings.content&&this.setContent(this.settings.content),this.hide(),this.resizable()},Zn=function(i){i=i||{},this.tools=O;var t=this,e={exceptions:["mw-handle-item"]};this.settings=_.extend({},e,i),this.settings.root.nodeType===9?this.document=this.settings.root:this.document=this.settings.root.ownerDocument,this.body=this.document.body;var n=20,s=function(a){return a%5>=2.5?a/5*5+5:a/5*5},o=function(a,c){a=s(a),c=s(c);for(var l=[],h=a-n,p=a+n,w=c-n,m=c+n;h<p;h+=5)for(;w<=m;w+=5)l.push([h,w]);return l},r=function(a,c){a&&a.parentElement&&c.indexOf(a)===-1&&t.body!==a&&c.push(a)};this.fromEvent=function(a){return t.tools.hasAnyOfClassesOnNodeOrParent(a.target,this.settings.exceptions)?[]:(t.document._test||(t.document._test=document.createElement("div"),t.document._test.style.position="absolute",t.document._test.style.left="10px",t.document._test.style.background="red",t.document._test.style.width="10px",t.document._test.style.height="10px",t.document.body.appendChild(t.document._test)),t.document._test.style.top=a.pageY+"px",this.fromPoint(a.pageX,a.pageY))},this.fromPoint=function(a,c){var l=[];t.document.defaultView.frameElement&&(c-=t.document.defaultView.scrollY);var h=t.document.elementFromPoint(a,c);if(!h)return[];r(h,l);var p=o(a,c);return p.forEach(function(w){r(t.document.elementFromPoint(w[0],w[1]),l)}),l}},Qn=function(i){return O.matches(i,'.row,[class*="row-"]')},ti=function(i){return O.matches(i,'.col,[class*="col-"]')};let M;const te=function(){return M||(M=document.createElement("div"),M.style.visibility="hidden",M.style.position="absolute",M.style.width="1px",M.style.height="1px",document.body.appendChild(M)),M},ot={},ei=function(i){if(!i||i.nodeType===3)return!1;var t=i.nodeName;if(typeof ot[t]<"u")return ot[t];var e=document.createElement(t);return te().appendChild(e),ot[t]=getComputedStyle(e).display==="block",te().removeChild(e),ot[t]},ni=(i,t,e)=>{i=i||"*";for(var n=t.querySelectorAll(i),s=0,o=[];s<n.length;s++)!ti(n[s])&&!Qn(n[s])&&!e.elementAnalyzer.isEdit(n[s])&&ei(n[s])&&o.push(n[s]);return o},ii=i=>{const{backgroundImageHolder:t,editClass:e,moduleClass:n,elementClass:s,allowDrop:o}=i.settings,r=i.root;for(var a=r.querySelectorAll("."+e+"."+t+", ."+e+" ."+t+", ."+e+'[style*="background-image"], .'+e+' [style*="background-image"]'),c=r.querySelectorAll("."+n+i.settings.unEditableModules.join(",."+n)),l=r.querySelectorAll("."+e),h=0,p=0,w=0;h<a.length;h++){var m=a[h];i.elementAnalyzer.isInEdit(m)&&(mw.tools.hasClass(m,n)||mw.tools.addClass(m,e),m.style.backgroundImage||(m.style.backgroundImage="none"))}for(;p<c.length;p++)c[h].classList.remove(n);for(;w<l.length;w++){for(var u=ni(":not(."+s+")",l[w],i),f=0,C=l[w].querySelectorAll("."+o),E=0;E<C.length;E++)C[E].classList.add(s);for(;f<u.length;f++)u[f].classList.contains(n)||i.elementAnalyzer.isInEdit(u[f])&&u[f].classList.add(s)}},si=function(i){this.handles=i,this.dragging=!1;var t=this;this.get=function(e){return this.handles[e]},this.set=function(e,n){this.get(e).set(n)},this.hide=function(e){e&&this.handles[e]?this.handles[e].hide():this.each(function(n,s){s.hide()})},this.hideAllBut=function(e){this.each(function(n,s){n!==e&&s.hide()})},this.show=function(e){e&&this.handles[e]?this.handles[e].show():this.each(function(n,s){s.show()})},this.each=function(e){if(e){var n;for(n in this.handles)e.call(t,n,this.handles[n])}},this.targetIsSelected=function(e,n){if(e){e=e.target||e;var s;for(s in this.handles){if(n&&n===this.handles[s])continue;const o=this.handles[s].getTarget();if(o&&o===e)return!0}return!1}},this.targetIsOrInsideHandle=function(e){if(e){e=e.target||e;var n;for(n in this.handles)if(this.handles[n].wrapper.get(0)===e||this.handles[n].wrapper.get(0).contains(e))return!0;return!1}},this.init=function(){this.each(function(e,n){n.draggable.on("dragStart",function(){t.dragging=!0,t.hideAllBut(e)}),n.draggable.on("dragEnd",function(){t.dragging=!1,n.show()})})},this.init()},oi=function(i){i=i||{};const t={template:"default"};let e={};this.settings=_.extend({},t,i),this._indicator=null;const n={};this.on=function(c,l){n[c]?n[c].push(l):n[c]=[l]},this.dispatch=function(c,l){n[c]&&n[c].forEach(function(h){h.call(this,l)})},this.visible=!1,this.hide=function(){this.visible&&(this._indicator.addClass("mw-drop-indicator-hidden"),this.visible=!1,e={})},this.show=function(){console.log(this.visible),this.visible||this._indicator.removeClass("mw-drop-indicator-hidden"),this.visible=!0};const s=["before-top","prepend-top","after-bottom","append-bottom"],o="mw-drop-indicator-position-",r=s.map(function(c){return o+c});let a=null;this.position=function(c,l){if(!(!c||!l)&&!(e.target===c&&e.position===l)){e.target=c,e.position=l,a!==l&&(this._indicator.removeClass(r),a=l,this._indicator.addClass(o+l));var h=O.offset(c);this._indicator.css({height:h.height,left:h.left,top:h.top,width:h.width}),this.show()}},this.make=function(){this._indicator=y(),this._indicator.html('<div class="mw-drop-indicator-block"><div class="mw-drop-indicator-pin"></div></div>'),this._indicator.addClass("mw-drop-indicator mw-drop-indicator-template-"+this.settings.template),this.hide(),this.settings.document.body.appendChild(this._indicator.get(0))},this.init=function(){this.make()},this.init()},ri=(i,t,e)=>{!i||!t||(i=i.isMWElement?i.get(0):i,i.dataset.tooltip=t,i.title=t,i.dataset.tooltipposition=e||"top-center")},q=function(i){this.options=i||{};var t=this;this._visible=!0,this.isVisible=function(){return this._visible},this.show=function(){this._visible=!0,this.root.addClass("mw-le-handle-menu-visible")},this.hide=function(){this._visible=!1,this.root.removeClass("mw-le-handle-menu-visible")},this.create=function(){this.root=y({props:{className:"mw-le-handle-menu",id:t.options.id||"mw-le-handle-menu-"+new Date().getTime()}}),this.buttonsHolder=y({props:{className:"mw-le-handle-menu-buttons"}}),this.root.append(this.buttonsHolder)};var e,n,s,o=function(){e=y({props:{className:"mw-le-handle-menu-title"}}),n=y({props:{className:"mw-le-handle-menu-title-text"}}),s=y({props:{className:"mw-le-handle-menu-title-icon"}}),e.append(n),e.append(s),t.root.prepend(e),t.title=e},r=null;this.getTarget=function(){return r},this.setTarget=function(a){r=a;for(var c=0;c<this.buttons.length;c++)this.buttons[c].config.onTarget&&this.buttons[c].config.onTarget(a,this.buttons[c].button.get(0),t.options.rootScope)},this.setTitle=function(a,c){n.html(a||""),s.html(c||"")},this.buttons=[],this.buildButtons=function(a,c){c=c||this.buttonsHolder,a=a||this.options.buttons,a.forEach(function(l){c.append(t.button(l))})},this.button=function(a){var c=y({props:{className:"mw-le-handle-menu-button"+(a.className?" "+a.className:"")}}),l={props:{className:"mw-le-handle-menu-button-content"}},h=y(l);if(a.title&&ri(h,a.title),a.icon){var p=y({props:{className:"mw-le-handle-menu-button-icon",innerHTML:a.icon}});h.append(p)}if(a.text){var w=y({props:{className:"mw-le-handle-menu-button-text",innerHTML:a.text}});h.append(w)}if(c.append(h),this.buttons.push({button:c,config:a}),a.menu){var m=y({props:{className:"mw-le-handle-menu-button-sub-menu"}});c.append(m),t.buildButtons(a.menu,m),c.on("click",function(){this.classList.toggle("sub-menu-active")})}else typeof a.action=="function"&&c.on("click",function(){a.action(t.getTarget(),c.get(0),{dialog:t.options.rootScope.dialog,tooltip:t.options.rootScope.tooltip})});return c},this.init=function(){this.create(),o(),this.setTitle(t.options.title,t.options.icon),this.buildButtons(),this.hide()},this.init()},ai=function(i){this.root=y({props:{id:"mw-handle-item-element-root"}}),this.menu=new q({id:"mw-handle-item-element-menu",title:"Element",buttons:[{title:"Settings",text:"",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z" /></svg>',className:"mw-handle-insert-button",onTarget:function(t,e){},action:function(t){i.dialog({})}},{title:i.lang("Delete"),text:"",icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z" /></svg>',className:"mw-handle-insert-button",action:function(t){}}]}),this.menu.show(),this.root.append(this.menu.root)},li=function(i){this.root=y({props:{id:"mw-handle-item-module-root",contentEditable:!1}});var t=new q({id:"mw-handle-item-element-menu-default",title:"Module",rootScope:i,buttons:[{title:"Settings",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>',action:()=>{const e=mw.app.get("liveEdit").handles.get("module").getTarget();mw.app.editor.dispatch("onModuleSettingsRequest",e);var n=e.dataset.type||e.getAttribute("type");n=n.trim(),mw.app.editor.dispatch("onModuleSettingsRequest@"+n,e)}}]});this.menu=new q({id:"mw-handle-item-element-menu",title:"Module",rootScope:i,buttons:[]}),this.menu.show(),t.show(),this.root.append(this.menu.root),this.root.append(t.root)},ci=(i,t)=>{const e=y({props:{className:"le-dialog-footer"}}),n=y({props:{className:"le-btn le-btn-primary le-dialog-footer-ok",innerHTML:i||"OK"}}),s=y({props:{className:"le-btn le-dialog-footer-cancel"}});return e.append(s),e.append(n),{ok:n,cancel:s,footer:e}};var P,G,Tt;class Se{constructor(t){x(this,G);x(this,P,{});t=t||{};const e={content:null,overlay:!0,closeOnEscape:!0,document,position:"centered",mode:"fixed"};this.settings=Object.assign({},e,t),this.build(),setTimeout(n=>this.open())}on(t,e){g(this,P)[t]?g(this,P)[t].push(e):g(this,P)[t]=[e]}dispatch(t,e){g(this,P)[t]&&g(this,P)[t].forEach(n=>{n.call(this,e)})}build(){this.root=y({props:{className:`le-dialog ${typeof this.settings.position=="string"?this.settings.position:""}`}});var t=y({props:{className:"le-dialog-close"}});t.on("click",()=>{this.remove()}),this.container=y({props:{className:"le-dialog-container"},content:this.settings.content}),this.root.append(t),this.root.append(this.container),this.settings.footer&&this.root.append(this.settings.footer.root||this.settings.footer),this.settings.document.body.appendChild(this.root.get(0)),this.settings.closeOnEscape&&this.settings.document.addEventListener("keydown",A(this,G,Tt)),this.settings.overlay&&this.overlay()}open(){if(this.settings.position.nodeName&&this.settings.position.ownerDocument===this.settings.document){var t=this.settings.position;t.ownerDocument;var e=t.ownerDocument.defaultView,n=t.getBoundingClientRect(),s=n.top+e.scrollY,o=n.left+t.offsetWidth+e.scrollX,r=this.root.get(0);s+r.offsetHeight>e.innerHeight+e.scrollY&&(s-=s+r.offsetHeight-(e.innerHeight+e.scrollY)),o+r.offsetWidth>e.innerWidth&&(o-=o+r.offsetWidth-e.innerWidth),this.root.css({top:s,left:o,position:this.settings.mode})}this.root.addClass("le-dialog-opened")}remove(){this.root.on("transitionend",()=>{this.root.remove(),this.overlay&&this.overlay.remove()}),this.root.removeClass("le-dialog-opened"),this.settings.closeOnEscape&&this.settings.document.removeEventListener("keydown",A(this,G,Tt)),this.dispatch("close")}overlay(){this.overlay=y({props:{className:"le-dialog-overlay"}}),this.settings.document.body.appendChild(this.overlay.get(0))}}P=new WeakMap,G=new WeakSet,Tt=function(t){(t.key==="Escape"||t.keyCode===27)&&this.remove()};const di=function(i,t){const e=ci(),n=new Se({content:i,footer:e,position:"centered"});return e.cancel.on("click",function(){n.remove()}),e.ok.on("click",function(){t&&t.call(),n.remove()}),n},hi=function(i){this.root=y({props:{id:"mw-handle-item-layout-root"}});const t={};this.on=(e,n)=>{t[e]?t[e].push(n):t[e]=[n]},this.dispatch=(e,n)=>{t[e]&&t[e].forEach(s=>{s.call(this,n)})},this.menu=new q({id:"mw-handle-item-layout-menu",title:i.lang("Layout"),rootScope:i,buttons:[{title:i.lang("Settings"),text:"",icon:'<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 13.3 15.9" xml:space="preserve"><path d="M8.2,2.4L11,5.1l-8.2,8.2H0v-2.8L8.2,2.4z M11.8,4.3L9,1.6l1.4-1.4C10.5,0.1,10.7,0,10.9,0c0.2,0,0.4,0.1,0.5,0.2l1.7,1.7c0.1,0.1,0.2,0.3,0.2,0.5S13.3,2.8,13.1,3L11.8,4.3z"/><rect y="14.5" width="12" height="1.4"/></svg>',className:"mw-handle-insert-button",menu:[{title:i.lang("Add something"),text:i.lang("Add something"),icon:'<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" version="1.1" width="24" height="24" viewBox="0 0 24 24"><path d="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z" /></svg>',className:"mw-handle-insert-button"},{title:i.lang("Settings1212"),text:"Do alert",className:"mw-handle-insert-button"}]},{title:i.lang("Clone"),text:"",icon:'<svg fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',className:"mw-handle-insert-button",action:function(e,n,s){var o=document.createElement("div");o.innerHTML=e.outerHTML,y("[id]",o).each(function(){this.id="le-id-"+new Date().getTime()}),y(e).after(o.innerHTML);var r=e.nextElementSibling;mw.reload_module(r,function(){s.statemanager.record({target:mw.tools.firstParentWithClass(e,"edit"),value:parent.innerHTML})}),r.scrollIntoView({behavior:"smooth",block:"start",inline:"start"})}},{title:i.lang("Move Down"),text:"",icon:'<svg fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z" /></svg>',className:"mw-handle-insert-button",onTarget:function(e,n,s){e.nextElementSibling===null?n.style.display="none":n.style.display=""},action:function(e,n,s){s.handles.get("layout").hide();var o=e.nextElementSibling;if(o){var r=e.getBoundingClientRect(),a=o.getBoundingClientRect(),c=0;r.top<a.top&&(c=-(r.top-a.top)),e.classList.add("mw-le-target-to-animate"),o.classList.add("mw-le-target-to-animate"),e.style.transform="translateY("+c+"px)",o.style.transform="translateY("+-c+"px)",setTimeout(function(){o.parentNode.insertBefore(e,o.nextSibling),e.classList.remove("mw-le-target-to-animate"),o.classList.remove("mw-le-target-to-animate"),e.style.transform="",o.style.transform=""},300)}}},{title:i.lang("Move up"),text:"",icon:'<svg fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',className:"mw-handle-insert-button",onTarget:function(e,n,s){e.previousElementSibling===null?n.style.display="none":n.style.display=""},action:function(e,n,s){s.handles.get("layout").hide();var o=e.previousElementSibling;if(o){var r=e.getBoundingClientRect(),a=o.getBoundingClientRect(),c=0;r.top>a.top&&(c=-(r.top-a.top)),e.classList.add("mw-le-target-to-animate"),o.classList.add("mw-le-target-to-animate"),e.style.transform="translateY("+c+"px)",o.style.transform="translateY("+-c+"px)",setTimeout(function(){o.parentNode.insertBefore(e,o),e.classList.remove("mw-le-target-to-animate"),o.classList.remove("mw-le-target-to-animate"),e.style.transform="",o.style.transform=""},300)}}},{title:i.lang("Delete"),text:"",icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path  d="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z" /></svg>',className:"mw-handle-insert-button",action:function(e,n,s){di("Are you sure",function(){e.remove()})}}]}),this.addButtons=function(){var e="Add Layout",n=s=>{this.dispatch("insertLayoutRequest"),this.dispatch("insertLayoutRequestOn"+s.charAt(0).toUpperCase()+s.slice(1))};this.plusTop=y({props:{className:"mw-handle-item-layout-plus mw-handle-item-layout-plus-top",innerHTML:i.lang(e)}}),this.plusBottom=y({props:{className:"mw-handle-item-layout-plus mw-handle-item-layout-plus-bottom",innerHTML:i.lang(e)}}),this.plusTop.on("click",function(){n("top")}),this.plusBottom.on("click",function(){n("bottom")}),this.root.append(this.plusTop),this.root.append(this.plusBottom)},this.menu.show(),this.addButtons(),this.root.append(this.menu.root)},ee={en:{Layout:"Layout","Add layout":"Add layout",Title:"Title",Settings:"Settings",Paragraph:"Paragraph",Text:"Text"},bg:{}},ui=(i,t)=>((!t||!ee[t])&&(t="en"),ee[t][i]||i),mi=function(i){this.root=y({props:{id:"mw-handle-interaction-item-element-root"}}),this.menu=new q({id:"mw-handle-item-element-menu",title:"Element",buttons:[]}),this.menu.show(),this.root.append(this.menu.root)};class pi{constructor(t){const e=this,n={};this.on=(m,u)=>{n[m]?n[m].push(u):n[m]=[u]},this.dispatch=(m,u)=>{n[m]&&n[m].forEach(f=>{f.call(this,u)})},this.paused=!1;var s={elementClass:"element",backgroundImageHolder:"background-image-holder",cloneableClass:"cloneable",editClass:"edit",stateManager:null,moduleClass:"module",nodrop:"nodrop",allowDrop:"allow-drop",unEditableModules:['[type="template_settings"]'],frameworksClasses:{col:["col","mw-col"]},document,mode:"manual",lang:"en",strict:!0,strictLayouts:!1,viewWindow:window};this.settings=_.extend({},s,t),this.document=this.settings.document,this.stateManager=this.settings.stateManager,this.lang=function(m){return ui(m,this.settings.lang)},this.settings.root||(this.settings.root=this.settings.document.body),this.root=this.settings.root,this.elementAnalyzer=new Le(this.settings),this.dropIndicator=new oi(this.settings);const o=new ai(this),r=new li(this),a=new hi(this);this.elementHandleContent=o,this.moduleHandleContent=r,this.layoutHandleContent=a,this.layoutHandleContent.on("insertLayoutRequest",()=>{this.dispatch("insertLayoutRequest")}),this.dialog=function(m){m||(m={});var u={document:window.top.document,position:r.menu.getTarget(),mode:"absolute"};e.pause();const f=new Se(_.extend({},u,m));return f.on("close",function(){e.play()}),f};var c=this.elementHandle=new st({...this.settings,dropIndicator:this.dropIndicator,content:o.root,handle:o.menu.title,document:this.settings.document,stateManager:this.settings.stateManager,resizable:!0});c.on("targetChange",function(m){o.menu.setTarget(m)}),this.moduleHandle=new st({...this.settings,dropIndicator:this.dropIndicator,content:r.root,handle:r.menu.title,document:this.settings.document,stateManager:this.settings.stateManager,resizable:!0});var l=this.moduleHandle;this.getModuleQuickSettings=m=>new Promise(u=>{u(mw.quickSettings[m]),this.dispatch("moduleQuickSettings",{module:m})}),l.on("targetChange",function(m){e.getModuleQuickSettings(m.dataset.type).then(function(u){r.menu.root.remove(),r.menu=new q({id:"mw-handle-item-element-menu",title:m.dataset.type,rootScope:e,buttons:u?u.mainMenu||[]:[],data:{target:m}}),r.menu.setTarget(m),r.menu.show(),r.root.append(r.menu.root)})}),this.layoutHandle=new st({...this.settings,dropIndicator:this.dropIndicator,content:a.root,handle:a.menu.title,document:this.settings.document,stateManager:this.settings.stateManager,type:"layout"});var h=this.layoutHandle,p=e.lang("Layout");a.menu.setTitle(p),h.on("targetChange",function(m){a.menu.setTarget(m),a.menu.setTitle(p),e.elementAnalyzer.isEditOrInEdit(m)?(a.plusTop.show(),a.plusBottom.show()):(a.plusTop.hide(),a.plusBottom.hide())}),a.handle=h,r.handle=l,o.handle=c;const w=new mi;this.interactionHandle=new st({...this.settings,content:w.root,document:this.settings.document,resizable:!1,className:"mw-handle-item-interaction-handle"}),this.interactionHandle.menu=w.menu,this.handles=new si({element:c,module:l,layout:h,interactionHandle:this.interactionHandle}),this.observe=new Zn(this.settings),this.init()}play(){this.paused=!1}pause(){this.handles.hide(),this.paused=!0}init(){this.settings.mode==="auto"&&ii(this);const t=n=>{if(this.handles.targetIsOrInsideHandle(n))return;const s=this.observe.fromEvent(n),o=s[0];if(this.handles.get("element").set(null),this.handles.get("module").set(null),this.handles.hide(),o){const r=this.elementAnalyzer.getType(o);r&&r!=="edit"&&(this.handles.set(r,s[0]),r==="element"?this.handles.hide("module"):r==="module"?this.handles.hide("element"):r==="layout"?this.handles.set("layout",layout):this.handles.hide())}else{const r=O.firstParentOrCurrentWithAnyOfClasses(n.target,["module-layouts"]);r&&this.handles.set("layout",r)}};let e;e="mousedown touchstart",y(this.root).on("mousemove",n=>{if(this.handles.targetIsOrInsideHandle(n))return;const s=this.observe.fromEvent(n),o=O.firstParentOrCurrentWithAnyOfClasses(s[0],["element","module"]),r=O.firstParentOrCurrentWithAnyOfClasses(n.target,["module-layouts"]);let a=!1;if(r){const l=this.handles.get("element").getTarget(),h=this.handles.get("module").getTarget();r.contains(l)&&(a=!0),r.contains(h)&&(a=!0),a?this.handles.hide("layout"):this.handles.set("layout",r)}if(o&&!this.handles.targetIsSelected(o,this.interactionHandle)&&!o.classList.contains("module-layouts")){var c="";o.dataset.mwTitle?c=o.dataset.mwTitle:o.dataset.type?c=o.dataset.type:o.nodeName==="P"?c=this.lang("Paragraph"):/(H[1-6])/.test(o.nodeName)?c=this.lang("Title")+" "+o.nodeName.replace(/^\D+/g,""):o.nodeName==="IMG"||o.nodeName==="IMAGE"?c=this.lang("Image"):["H1","H2","H3","H4","H5","H6"].includes(o.nodeName)?c=this.lang("Title "+o.nodeName.replace("H","")):["DIV","MAIN","SECTION"].includes(o.nodeName)?c=this.lang("Block"):c=this.lang("Text"),this.interactionHandle.menu.setTitle(c),this.interactionHandle.show(),this.interactionHandle.set(o)}else this.interactionHandle.hide()}),y(this.root).on(e,n=>{this.paused||t(n)})}}globalThis.LiveEdit=pi;const Li=`.mw-drop-indicator{position:absolute;pointer-events:none!important;z-index:1001;margin:0!important;padding:0!important;border-color:#111;border-style:solid;border-width:0}.mw-drop-indicator.mw-drop-indicator-position-top{border-top-width:2px}.mw-drop-indicator.mw-drop-indicator-position-bottom{border-bottom-width:2px}@keyframes mwLiveEditDropIndicatorAnimationUp{0%,to{top:30px;opacity:1}50%{top:40px;opacity:.6}}@keyframes mwLiveEditDropIndicatorAnimationDown{0%,to{top:-30px;opacity:1}50%{top:-40px;opacity:.6}}.mw-drop-indicator-template-default .mw-drop-indicator-pin{position:absolute;left:50%;width:24px;height:24px;background-repeat:no-repeat;background-size:contain;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M9,4H15V12H19.84L12,19.84L4.16,12H9V4Z' /%3E%3C/svg%3E");bottom:0;transition:transform .2s;transform:rotate(180deg);top:30px;display:inline-block}.mw-drop-indicator-template-default.mw-drop-indicator-position-before-top .mw-drop-indicator-pin{margin-top:-70px;transform:rotate(0)}.mw-drop-indicator-template-default.mw-drop-indicator-position-after-bottom .mw-drop-indicator-pin{margin-top:50px}.mw-drop-indicator-template-default.mw-drop-indicator-hidden .mw-drop-indicator-pin,.mw-drop-indicator-template-default.mw-drop-indicator-position-prepend-top .mw-drop-indicator-pin,.mw-drop-indicator-template-default.mw-drop-indicator-position-append-bottom .mw-drop-indicator-pin{display:none;animation:none}.mw-drop-indicator-template-default .mw-drop-indicator-block{transform:scale(1);pointer-events:none!important;background-color:#111;position:absolute}.mw-drop-indicator-template-default.mw-drop-indicator-hidden{opacity:0;transform:scale(.8);visibility:hidden!important}.mw-drop-indicator-template-default.mw-drop-indicator-position-after-bottom .mw-drop-indicator-block,.mw-drop-indicator-template-default.mw-drop-indicator-position-before-top .mw-drop-indicator-block{height:5px;width:100%;left:0}.mw-drop-indicator-template-default.mw-drop-indicator-position-append-bottom .mw-drop-indicator-block,.mw-drop-indicator-template-default.mw-drop-indicator-position-prepend-top .mw-drop-indicator-block{height:45px;width:100%;background-color:#00000054;left:0}.mw-drop-indicator-template-default.mw-drop-indicator-position-prepend-top .mw-drop-indicator-block,.mw-drop-indicator-template-default.mw-drop-indicator-position-before-top .mw-drop-indicator-block{top:0}.mw-drop-indicator-template-default.mw-drop-indicator-position-append-bottom .mw-drop-indicator-block,.mw-drop-indicator-template-default.mw-drop-indicator-position-after-bottom .mw-drop-indicator-block{bottom:0}.mw-drop-indicator-template-default.mw-drop-indicator-position-after-bottom .mw-drop-indicator-pin{animation:mwLiveEditDropIndicatorAnimationDown 2s linear infinite}.mw-drop-indicator-template-default.mw-drop-indicator-position-before-top .mw-drop-indicator-pin{animation:mwLiveEditDropIndicatorAnimationUp 2s linear infinite}.mw-handle-item{position:absolute;z-index:9;cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;border:3px solid #0078ff;transition:opacity .2s;pointer-events:none}.mw-handle-item.mw-le-resizable{position:absolute}.mw-handle-item.mw-handle-item-interaction-handle{pointer-events:none}.mw-handle-item.mw-handle-item-dragging{border-color:transparent}.mw-handle-item.mw-handle-item-dragging *{opacity:0!important}.mw-handle-item.mw-handle-item-hidden{opacity:0;visibility:hidden}.mw-handle-item .mw-handlemenu-item{pointer-events:all}.mw-draggable-helper{position:absolute;z-index:10;background-color:#7775757d;pointer-events:none}.mw-le-handle-menu{position:absolute;color:#404040}.mw-le-handle-menu .mw-le-handle-menu-buttons{height:42px;border-radius:7px;border:1px solid transparent;padding:3px 12px;display:inline-flex;align-items:center;background-color:#fff;pointer-events:all;box-shadow:#11111a1a 0 4px 16px,#11111a0d 0 8px 32px;position:absolute;top:-40px;left:-3px;transition:.2s;opacity:0;transform:translateY(10px)}.mw-le-handle-menu .mw-le-handle-menu-buttons:empty{display:none!important}.mw-le-handle-menu *{vertical-align:middle}.mw-handle-item.mw-handle-active .mw-le-handle-menu .mw-le-handle-menu-buttons{opacity:1;transform:translateY(0)}#mw-handle-item-element-menu{top:-22px;left:-3px}#mw-handle-item-layout-menu{top:5px;right:5px;left:auto}#mw-handle-item-layout-menu .mw-le-handle-menu-buttons{left:auto;right:5px;top:5px}#mw-handle-item-layout-menu .mw-le-handle-menu-title{display:none}.mw-le-handle-menu-buttons{display:inline-block;white-space:nowrap}.mw-le-handle-menu-buttons>.mw-le-handle-menu-button{display:inline-flex;width:32px;height:32px;margin:0 2px;border-radius:3px;cursor:pointer;text-align:center;justify-content:center;align-items:center;transition:.3s;font-size:19px}.mw-le-handle-menu-buttons>.mw-le-handle-menu-button:hover{background-color:#000}.mw-le-handle-menu-button-sub-menu{display:flex;flex-wrap:nowrap;padding:10px 0;position:absolute;visibility:hidden;opacity:0;transform:scaleY(.5);transform-origin:center top;transition:.2s;top:100%;left:0;background-color:#fff;box-shadow:0 4px 16px #11111a1a,0 8px 32px #11111a0d}.mw-le-handle-menu-button-sub-menu .mw-le-handle-menu-button{display:block;white-space:nowrap;padding:5px 10px;text-align:left;transition:background-color .3s}.mw-le-handle-menu-button-sub-menu .mw-le-handle-menu-button:hover{background-color:#000}.mw-le-handle-menu-button.sub-menu-active>.mw-le-handle-menu-button-sub-menu{visibility:visible;opacity:1;transform:scaleY(1)}.mw-le-handle-menu-button-content{display:inline-flex;white-space:nowrap;flex-wrap:nowrap;align-items:center}.mw-le-handle-menu-button-content .mw-le-handle-menu-button-text{font-size:14px}.mw-le-handle-menu-title{display:none;align-items:center;justify-content:center;padding:0 5px;height:20px;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:grab;background-color:#0078ff;color:#fff}.mw-handle-item-interaction-handle .mw-le-handle-menu-title{display:inline-flex}.mw-le-handle-menu-button-icon{display:inline-flex;white-space:nowrap;align-items:center;margin-inline:6px}.mw-le-handle-menu-button-icon svg,.mw-le-handle-menu-button-icon .mdi,.mw-le-handle-menu-button-icon .material-icons,.mw-le-handle-menu-button-icon .fa{max-width:25px;max-height:25px;display:inline-block}.mw-le-handle-menu-button-icon svg{width:25px;height:25px}.mw-le-handle-menu-button-icon *{max-width:31px;max-height:31px}.mw-le-handle-menu-title-text{font-size:12px}.mw-handle-item-layout-plus{font-size:12px;display:inline-flex;position:absolute;pointer-events:all;min-width:100px;text-align:center;align-items:center;justify-content:center;white-space:nowrap;background-color:#0078ff;color:#fff;border-radius:7px;cursor:pointer;left:50%;transform:translate(-50%);height:30px;padding:0 15px;box-shadow:#11111a1a 0 4px 16px,#11111a0d 0 8px 32px}.mw-handle-item-layout-plus.mw-handle-item-layout-plus-top{top:0;margin-top:-15px}.mw-handle-item-layout-plus.mw-handle-item-layout-plus-bottom{bottom:0;margin-bottom:-15px}.mw-handle-item-layout-plus:hover{background-color:#016ce6}.mw-handle-item-element-image-control{position:absolute;top:20%;left:50%;width:44px;height:44px;margin-left:-22px;border-radius:50px;background-color:#fff;box-shadow:#0000000d 0 6px 24px,#00000014 0 0 0 1px;cursor:pointer;pointer-events:all;display:flex;align-items:center;justify-content:center;background-size:20px auto;background-position:center;background-repeat:no-repeat;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' style='width:24px;height:24px' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z' /%3E%3C/svg%3E")}.mw-handle-item-element-image-control>input{position:absolute;top:0}.mw-element-is-dragged{opacity:0;pointer-events:none}html.le-dragging .mw-handle-item{opacity:0!important}.mw-handle-item.mw-le-resizable .mw-le-resizer:before,.mw-handle-item.mw-le-resizable .mw-le-resizer:after{position:absolute;width:9px;height:9px;background-color:#fff;border:2px solid #2a84fb;content:""}.mw-handle-item.mw-le-resizable .mw-le-resizer-l:before,.mw-handle-item.mw-le-resizable .mw-le-resizer-l:after{left:-6px}.mw-handle-item.mw-le-resizable .mw-le-resizer-l:before{top:-6px;cursor:nw-resize}.mw-handle-item.mw-le-resizable .mw-le-resizer-l:after{top:calc(50% - 6px)}.mw-handle-item.mw-le-resizable .mw-le-resizer-r:before,.mw-handle-item.mw-le-resizable .mw-le-resizer-r:after{left:2px}.mw-handle-item.mw-le-resizable .mw-le-resizer-r:before{bottom:-6px;cursor:nw-resize}.mw-handle-item.mw-le-resizable .mw-le-resizer-r:after{bottom:calc(50% - 6px)}.mw-handle-item.mw-le-resizable .mw-le-resizer-b:before,.mw-handle-item.mw-le-resizable .mw-le-resizer-b:after{top:2px}.mw-handle-item.mw-le-resizable .mw-le-resizer-b:before{left:-6px;cursor:ne-resize}.mw-handle-item.mw-le-resizable .mw-le-resizer-b:after{left:calc(50% - 4px)}.mw-handle-item.mw-le-resizable .mw-le-resizer-t:before,.mw-handle-item.mw-le-resizable .mw-le-resizer-t:after{top:-6px}.mw-handle-item.mw-le-resizable .mw-le-resizer-t:before{right:-6px;cursor:ne-resize}.mw-handle-item.mw-le-resizable .mw-le-resizer-t:after{right:calc(50% - 5px)}.le-dialog-overlay{position:fixed;top:0;left:0;z-index:122;width:100%;height:100%;background-color:#0000000d}.le-dialog-close{width:30px;height:30px;background-repeat:no-repeat;background-position:center;background-size:25px 25px;position:absolute;top:5px;right:5px;cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' style='width:24px;height:24px' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' /%3E%3C/svg%3E")}.le-dialog{max-width:90%;position:fixed;top:50%;left:50%;transform:scale(.8);transform-origin:center center;z-index:1024;transition:.3s;visibility:hidden;opacity:0;pointer-events:none;min-width:320px}.le-dialog.le-dialog-centered{transform:scale(.8) translate(-50%,-50%)}.le-dialog.le-dialog-centered.le-dialog-opened{transform:scale(1) translate(-50%,-50%)}.le-dialog.le-dialog-opened{visibility:visible;opacity:1;pointer-events:auto;transform:scale(1)}.le-dialog .le-dialog-container{padding:20px;background-color:#fff;border-radius:5px;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.mw-le-resizable{position:relative}.mw-le-resizer{position:absolute;pointer-events:all}.mw-le-resizer-r{cursor:e-resize;height:100%;right:0;top:0;width:5px}.mw-le-resizer-l{cursor:e-resize;height:100%;left:0;top:0;width:5px}.mw-le-resizer-b{bottom:0;cursor:n-resize;height:5px;left:0;width:100%}.mw-le-resizer-t{top:0;cursor:n-resize;height:5px;left:0;width:100%}mw-le-element{display:block;line-height:normal;font-weight:400;font-style:normal;list-style:none;letter-spacing:normal;word-spacing:normal}mw-le-element,mw-le-element *,mw-le-element *:before,mw-le-element *:after{margin:0;padding:0;font-family:Verdana,sans-serif;box-sizing:border-box}.edit,.element,.module{margin-top:20px;padding-top:20px;min-height:100px}.edit.mw-le-target-to-animate,.element.mw-le-target-to-animate,.module.mw-le-target-to-animate{transition:transform .3s!important}.le-selectable-items-list-image{background-size:contain;background-repeat:no-repeat;background-position:center;height:120px}.le-selectable-items-list-type-layouts .le-selectable-items-list-image{background-size:cover}
`;var T,z,V,Z,kt,Q,_t,pt,Ae;class Oe{constructor(t={}){x(this,Z);x(this,Q);x(this,pt);x(this,T,null);x(this,z,{});L(this,"selectedCategory","");x(this,V,[]);L(this,"root",null);const e={mode:"local",document,encapsulate:!1,css:!1,searchMode:"local",data:[],skin:"defaultModules"};this.settings=Object.assign({},e,t),this.document=this.settings.document}on(t,e){g(this,z)[t]?g(this,z)[t].push(e):g(this,z)[t]=[e]}dispatch(t,e){g(this,z)[t]&&g(this,z)[t].forEach(n=>{n.call(this,e)})}getData(){return g(this,T)}setData(t,e=!0){jt(this,T,t);let n=0,s=g(this,T).length;for(;n<s;n++)typeof g(this,T)[n].categories=="string"&&(g(this,T)[n].categories=g(this,T)[n].categories.split(",").map(o=>o.trim()));e&&this.dispatch("dataChanged",g(this,T))}prepareCategories(){const t=[],e=this.getData();let n=0,s=e.length;for(;n<s;n++){let r=e[n].categories||"",a=0,c=r.length;for(;a<c;a++){const l=r[a].trim();t.indexOf(l)===-1&&t.push(l)}}t.sort(),this.categories=t}createCategoriesMenu(){const t=this.document.createElement("ul");this.prepareCategories(),t.className="modules-list-categories",t.innerHTML=this.categories.map(e=>`<li data-category="${e}">${e}</li>`).join(""),t.innerHTML=`<li data-category="">All categories</li> ${t.innerHTML}`,t.addEventListener("click",e=>{e.target.nodeName==="LI"&&this.selectCategory(e.target.dataset.category)}),this.categoriesNavigation=t,this.rootShadow.appendChild(t),this.on("categorySelect",e=>{const n=t.querySelectorAll("[data-category]");for(const s of n)s.classList[s.dataset.category===e?"add":"remove"]("active")})}selectCategory(t=""){this.selectedCategory=t,this.search(t),this.dispatch("categorySelect",t)}createRoot(){if(this.root=this.document.createElement("div"),this.root.className="modules-list modules-list-"+this.settings.skin,this.rootShadow=this.settings.encapsulate?this.root.attachShadow({mode:"open"}):this.root,this.settings.css){let t=document.createElement("style");t.textContent=this.settings.css,this.rootShadow.appendChild(t)}}renderModulesCategorized(){this.modulesList=this.document.createElement("div"),this.modulesList.className="modules-list-block",this.modulesListNoResultsNode=this.document.createElement("div"),this.modulesListNoResultsNode.className="modules-list-block-no-results",this.modulesListNoResultsNode.innerHTML="Nothing found...",this.modulesListNoResultsNode.style.display="none";const t=this.getData();let e=0,n=t.length;const s={miscellaneous:A(this,Q,_t).call(this,"miscellaneous")};for(;e<n;e++)(t[e].categories||["miscellaneous"]).forEach(r=>{s[r]||(s[r]=A(this,Q,_t).call(this,r));const a=A(this,Z,kt).call(this,t[e]);g(this,V).push(a),s[r].appendChild(a),s[r].__$hasNodes=!0});for(const o in s)s[o].__$hasNodes&&this.modulesList.appendChild(s[o]);this.rootShadow.appendChild(this.modulesList),this.modulesList.appendChild(this.modulesListNoResultsNode)}renderModules(){this.modulesList=this.document.createElement("div"),this.modulesList.className="modules-list-block",this.modulesListNoResultsNode=this.document.createElement("div"),this.modulesListNoResultsNode.className="modules-list-block-no-results",this.modulesListNoResultsNode.innerHTML="Nothing found...",this.modulesListNoResultsNode.style.display="none";const t=this.getData();let e=0,n=t.length;for(;e<n;e++){const s=A(this,Z,kt).call(this,t[e]);g(this,V).push(s),this.modulesList.appendChild(s)}this.rootShadow.appendChild(this.modulesList),this.modulesList.appendChild(this.modulesListNoResultsNode)}hideItem(t){t.nodeName&&(t.style.display="none")}showItem(t){t.nodeName&&(t.style.display="")}createSearchGUI(){this.searchBlock=this.document.createElement("div"),this.searchField=this.document.createElement("input"),this.searchField.type="text",this.searchField.placeholder="Type to Search...",this.searchBlock.className="modules-list-search-block",this.searchField.className="modules-list-search-field",this.searchBlock.appendChild(this.searchField),this.rootShadow.appendChild(this.searchBlock),this.searchField.addEventListener("input",t=>this.search(void 0,this.searchField.value)),this.on("categorySelect",t=>{this.searchField.value=""})}async search(t="",e=""){if(this.settings.searchMode==="local")return A(this,pt,Ae).call(this,t,e)}async createCategorized(){return this.setData(this.settings.data),this.createRoot(),this.createSearchGUI(),this.renderModulesCategorized(),new Promise(t=>{t(this)})}async create(){return this.setData(this.settings.data),this.createRoot(),this.createCategoriesMenu(),this.renderModules(),this.createSearchGUI(),new Promise(t=>{t(this)})}}T=new WeakMap,z=new WeakMap,V=new WeakMap,Z=new WeakSet,kt=function(t){t.locked=t.description.includes("a");const e=this.document.createElement("div");return e.className="modules-list-block-item modules-list-block-item-is-locked-"+t.locked,e.__$data=t,e.innerHTML=`
            <div class="modules-list-block-item-picture" style="background-image: url(${t.icon||t.screenshot||t.image})"></div>
            <div class="modules-list-block-item-title">${t.name||t.title}</div>
            <div class="modules-list-block-item-description">${t.description}</div>
            ${t.locked?'<span class="modules-list-block-item-locked-badge">PRO</span>':""}
        `,e.addEventListener("click",n=>{n.stopPropagation(),e.__$data.locked?this.dispatch("lockedModuleSelected",{data:t,element:e}):this.dispatch("moduleSelected",{data:t,element:e})}),e.$data=t,e},Q=new WeakSet,_t=function(t){const e=this.document.createElement("div");return e.className="modules-list-block-category-section",e.innerHTML='<div class="modules-list-block-category-section-title"><h5>'+t+"</h5></div>",e.__$hasNodes=!1,e},pt=new WeakSet,Ae=async function(t,e){return t&&(t=t.trim().toLowerCase()),e&&(e=e.trim().toLowerCase()),new Promise(n=>{let s=0,o=g(this,V).length,r=0;for(;s<o;s++){const a=g(this,V)[s],c=a.$data;if(t&&c.categories.indexOf(t)===-1){this.hideItem(a);continue}if(e&&(c.name||c.title).toLowerCase().indexOf(e)===-1){this.hideItem(a);continue}this.showItem(a),r++}console.log(e,t),this.modulesListNoResultsNode.style.display=r===0?"":"none",n()})};const ht=[],Te=function(i){ht.push(this),this.dialog=mw.element({props:{className:"mw-le-dialog-block "+i}}),this.overlay=mw.element({props:{className:"mw-le-overlay"}}),this.open=function(){this.dialog.addClass("active"),this.overlay.addClass("active"),this.closeButton.addClass("active")},this.close=function(){this.dialog.removeClass("active"),this.overlay.removeClass("active"),this.closeButton.removeClass("active")},this.remove=function(){this.close(),setTimeout(()=>{this.dialog.remove(),this.overlay.remove(),this.closeButton.remove()},400)},this.closeButton=mw.element({props:{className:"mw-le-dialog-close"}}),this.closeButton.on("click",t=>{this.remove()}),mw.element(document.body).append(this.overlay),mw.element(document.body).append(this.dialog),mw.element(document.body).append(this.closeButton),setTimeout(()=>{this.open()},100)};document.addEventListener("keydown",function(i){(i.key==="Escape"||i.keyCode===27)&&ht.length>0&&(ht[0].remove(),ht.splice(0,1))});var Ht,ne=function(i){var t=new Oe({data:Ht});t.create().then(function(){var e=mw.element({props:{className:"mw-le-layouts-dialog-row"}}),n=mw.element({props:{className:"mw-le-layouts-dialog-col"}}),s=mw.element({props:{className:"mw-le-layouts-dialog-col"}});e.append(n),e.append(s),mw.element(t.root).append(e),n.append(t.searchBlock);var o=mw.element({props:{innerHTML:"Categories",className:"mw-le-layouts-dialog-categories-title"}});n.append(o),n.append(t.categoriesNavigation),s.append(t.modulesList),i.append(t.root)})};const fi=()=>{var i=new Te("mw-le-layouts-dialog"),t=i.dialog;if(Ht){ne(t);return}mw.spinner({element:t.get(0),decorate:!0}),fetch(`${mw.settings.site_url}api/module/list?layout_type=layout&elements_mode=true&group_layouts_by_category=true`).then(function(e){return e.json()}).then(function(e){Ht=e,ne(t),mw.spinner({element:t.get(0),decorate:!0}).remove()})};var Rt,ie=function(i){var t=new Oe({data:Rt});t.createCategorized().then(function(){i.append(t.root)})};const gi=()=>{var i=new Te("mw-le-modules-dialog"),t=i.dialog;mw.$("#mw-plus-tooltip-selector li").each(function(){this.onclick=function(){var e=mw.$(this).attr("data-module-name"),n={class:this.className};e==="layout"&&(n.template=mw.$(this).attr("template")),mw.module.insert(mw._activeElementOver,e,n,mw.handleElement.positionedAt,mw.liveEditState),mw.wysiwyg.change(mw._activeElementOver),tooltip.remove()}}),Rt?ie(t):(mw.spinner({element:t.get(0),decorate:!0}),fetch(`${mw.settings.site_url}api/module/list?layout_type=module`).then(function(e){return e.json()}).then(function(e){Rt=e,ie(t),mw.spinner({element:t.get(0),decorate:!0}).remove()}))},wi={cssEditor:function(){document.getElementById("css-editor-template").classList.toggle("active")},themeEditor:function(){document.getElementById("general-theme-settings").classList.toggle("active")},insertModule:function(){return gi()},insertLayout:function(){return fi()}},yi={modulesListData:null,list:async function(){return this.modulesListData?this.modulesListData:(await mt.get(route("api.module.list")+"?layout_type=module").then(i=>{this.modulesListData=i.data}),this.modulesListData)},modulesSkinsData:[],getSkins:async function(i){if(this.modulesSkinsData[i])return this.modulesSkinsData[i];if(await mt.get(route("api.module.getSkins")+"?module="+i).then(t=>{this.modulesSkinsData[i]=t.data}),this.modulesSkinsData[i])return this.modulesSkinsData[i]}},bi={layoutsListData:null,list:async function(){return this.layoutsListData?this.layoutsListData:(await mt.get(route("api.module.list")+"?layout_type=layout&elements_mode=true&group_layouts_by_category=true").then(i=>{this.layoutsListData=i.data}),this.layoutsListData)},layoutSkinsData:[],getSkins:async function(){var i="layouts";if(this.layoutSkinsData[i])return this.layoutSkinsData[i];if(await mt.get(route("api.module.getSkins")+"?module="+i).then(t=>{this.layoutSkinsData[i]=t.data}),this.layoutSkinsData[i])return this.layoutSkinsData[i]}};class vi extends Dt{constructor(){super()}onRegister(){document.addEventListener("keydown",t=>{(t.key==="Enter"||t.keyCode===13)&&this.dispatch("enter",t),(t.key==="Escape"||t.keyCode===27)&&this.dispatch("escape",t),(t.key==="Backspace"||t.keyCode===8)&&this.dispatch("backspace",t),(t.key==="Delete"||t.keyCode===46)&&this.dispatch("delete",t),t.ctrlKey&&t.keyCode===83&&this.dispatch("ctrl+s",t),t.ctrlKey&&t.keyCode===90&&this.dispatch("ctrl+z",t),t.ctrlKey&&t.keyCode===89&&this.dispatch("ctrl+y",t)})}}class Ei extends Dt{selectIcon(t){var e=$(t)[0];mw.iconLoader().init();var n=mw.iconPicker({iconOptions:!1});n.target=document.createElement("i"),n.on("select",function(s){s.render(),e.value=n.target.outerHTML;var o=new Event("input");e.dispatchEvent(o),n.dialog("hide")}),n.dialog()}removeIcon(t){var e=$(t)[0];e.value="";var n=new Event("input");e.dispatchEvent(n)}}mw.app=new Re;mw.app.register("commands",wi);mw.app.register("modules",yi);mw.app.register("layouts",bi);mw.app.register("keyboard",vi);mw.app.register("iconPicker",Ei);export{xi as E,pi as L,Dt as M,mt as a,Li as l};
